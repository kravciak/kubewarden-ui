{"version":3,"file":"kubewarden-3.1.1-rc.1.umd.min.detail.js","mappings":"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","sources":["webpack://kubewarden-3.1.1-rc.1/./detail/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-3.1.1-rc.1/./detail/policies.kubewarden.io.policyserver.vue?8e86","webpack://kubewarden-3.1.1-rc.1/./assets/ lazy ^\\.\\/.*\\.json$ chunkName: policyDashboard namespace object","webpack://kubewarden-3.1.1-rc.1/./detail/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-3.1.1-rc.1/./detail/policies.kubewarden.io.admissionpolicy.vue?483c","webpack://kubewarden-3.1.1-rc.1/./components/MetricsChecklist.vue?d956","webpack://kubewarden-3.1.1-rc.1/./components/TraceTable.vue","webpack://kubewarden-3.1.1-rc.1/./utils/duration-format.ts","webpack://kubewarden-3.1.1-rc.1/./components/TraceChecklist.vue","webpack://kubewarden-3.1.1-rc.1/./components/TraceChecklist.vue?29ce","webpack://kubewarden-3.1.1-rc.1/./components/TraceTable.vue?a3c0","webpack://kubewarden-3.1.1-rc.1/./components/MetricsChecklist.vue?857e","webpack://kubewarden-3.1.1-rc.1/./components/MetricsTab.vue","webpack://kubewarden-3.1.1-rc.1/./modules/grafana.ts","webpack://kubewarden-3.1.1-rc.1/./modules/metricsConfig.ts","webpack://kubewarden-3.1.1-rc.1/./components/MetricsChecklist.vue","webpack://kubewarden-3.1.1-rc.1/./components/MetricsChecklist.vue?f4a7","webpack://kubewarden-3.1.1-rc.1/./components/MetricsTab.vue?8408","webpack://kubewarden-3.1.1-rc.1/./components/TraceTable.vue?2896","webpack://kubewarden-3.1.1-rc.1/./utils/service.ts","webpack://kubewarden-3.1.1-rc.1/./modules/jaegerTracing.ts","webpack://kubewarden-3.1.1-rc.1/./components/TraceChecklist.vue?7eb5","webpack://kubewarden-3.1.1-rc.1/./detail/policies.kubewarden.io.policyserver.vue?d331","webpack://kubewarden-3.1.1-rc.1/./detail/policies.kubewarden.io.policyserver.vue?6042","webpack://kubewarden-3.1.1-rc.1/./components/TraceTable.vue?33de","webpack://kubewarden-3.1.1-rc.1/./detail/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-3.1.1-rc.1/./detail/policies.kubewarden.io.clusteradmissionpolicy.vue?6ad6","webpack://kubewarden-3.1.1-rc.1/./components/Policies/PolicyDetail.vue","webpack://kubewarden-3.1.1-rc.1/./components/RulesTable.vue","webpack://kubewarden-3.1.1-rc.1/./components/RulesTable.vue?2417","webpack://kubewarden-3.1.1-rc.1/./components/Policies/PolicyDetail.vue?9b92","webpack://kubewarden-3.1.1-rc.1/./components/TraceChecklist.vue?adee"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { _CREATE } from '@shell/config/query-params';\nimport { allHash } from '@shell/utils/promise';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { mapPref, GROUP_RESOURCES } from '@shell/store/prefs';\n\nimport { BadgeState } from '@components/BadgeState';\nimport CountGauge from '@shell/components/CountGauge';\nimport Loading from '@shell/components/Loading';\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Tab from '@shell/components/Tabbed/Tab';\n\nimport { RELATED_HEADERS } from '@kubewarden/config/table-headers';\nimport { KUBEWARDEN } from '@kubewarden/types';\n\nimport MetricsTab from '@kubewarden/components/MetricsTab';\nimport TraceTable from '@kubewarden/components/TraceTable';\n\nexport default {\n  name: 'PolicyServer',\n\n  components: {\n    BadgeState,\n    CountGauge,\n    Loading,\n    MetricsTab,\n    ResourceTabs,\n    ResourceTable,\n    Tab,\n    TraceTable\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n    value: {\n      type:     Object,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    const hash = await allHash({\n      relatedPolicies:      this.value.allRelatedPolicies(),\n      policyGauges:         this.value.policyGauges()\n    });\n\n    const assignIfNotEmpty = (prop, value) => {\n      if (!isEmpty(value)) {\n        this[prop] = value;\n      }\n    };\n\n    assignIfNotEmpty('relatedPolicies', hash.relatedPolicies);\n    assignIfNotEmpty('policyGauges', hash.policyGauges);\n  },\n\n  data() {\n    return {\n      RELATED_HEADERS,\n      policyGauges:         null,\n      relatedPolicies:      null,\n      reloadRequired:       false,\n      resource:             KUBEWARDEN.POLICY_SERVER\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...mapGetters({ policyTraces: 'kubewarden/policyTraces' }),\n    _group: mapPref(GROUP_RESOURCES),\n\n    filteredTraces() {\n      if (!isEmpty(this.policyTraces)) {\n        return this.policyTraces.filter((policyTraceObj) => {\n          if (this.currentCluster?.id === policyTraceObj.cluster) {\n            return policyTraceObj;\n          }\n        });\n      }\n\n      return null;\n    },\n\n    emptyTraces() {\n      return isEmpty(this.filteredTraces);\n    },\n\n    groupPreference() {\n      const out = this._group === 'namespace' ? 'kind' : null;\n\n      return out;\n    },\n\n    relatedPoliciesTotal() {\n      if (isEmpty(this.relatedPolicies)) {\n        return 0;\n      }\n\n      return this.relatedPolicies.length;\n    },\n\n    tracesGauges() {\n      if (!this.emptyTraces) {\n        return this.value.tracesGauges(this.filteredTraces);\n      }\n\n      return null;\n    },\n\n    traceGaugeTotals() {\n      if (!this.emptyTraces) {\n        return this.filteredTraces?.flatMap((policyTraceObj) => policyTraceObj.traces).length;\n      }\n\n      return 0;\n    }\n  },\n\n  methods: {\n    hasNamespaceSelector(row) {\n      return row.namespaceSelector;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <template v-if=\"policyGauges\">\n      <div class=\"row\">\n        <template>\n          <div class=\"col span-6\">\n            <h3 data-testid=\"kw-ps-detail-status-title\">\n              {{ t('kubewarden.policyServer.policyGauge.byStatus') }}\n            </h3>\n            <div class=\"gauges mb-20\">\n              <CountGauge\n                v-for=\"(group, key) in policyGauges\"\n                :key=\"key\"\n                :total=\"relatedPoliciesTotal\"\n                :useful=\"group.count || 0\"\n                :graphical=\"false\"\n                :primary-color-var=\"`--sizzle-${group.color}`\"\n                :name=\"key\"\n              />\n            </div>\n          </div>\n        </template>\n        <template v-if=\"!emptyTraces\">\n          <div class=\"col span-6\">\n            <h3>\n              {{ t('kubewarden.policyServer.policyGauge.traces') }}\n            </h3>\n            <div class=\"gauges mb-20\">\n              <CountGauge\n                v-for=\"(group, key) in tracesGauges\"\n                :key=\"key\"\n                :useful=\"group.count || 0\"\n                :total=\"traceGaugeTotals\"\n                :graphical=\"false\"\n                :primary-color-var=\"`--sizzle-${group.color}`\"\n                :name=\"key\"\n              />\n            </div>\n          </div>\n        </template>\n      </div>\n    </template>\n\n    <ResourceTabs :value=\"value\" :mode=\"mode\">\n      <Tab name=\"related-policies\" label=\"Policies\" :weight=\"99\">\n        <template #default>\n          <ResourceTable\n            :rows=\"relatedPolicies || []\"\n            :headers=\"RELATED_HEADERS\"\n            :groupable=\"true\"\n            :group-by=\"groupPreference\"\n            :table-actions=\"true\"\n            data-testid=\"kw-ps-detail-related-policies-list\"\n          >\n            <template #col:operation=\"{ row }\">\n              <td>\n                <BadgeState\n                  :data-testid=\"`kw-ps-detail-${ row.id }-state`\"\n                  :label=\"row.operation\"\n                  :color=\"color(row.operation)\"\n                />\n              </td>\n            </template>\n          </ResourceTable>\n        </template>\n      </Tab>\n\n      <Tab name=\"policy-tracing\" label=\"Tracing\" :weight=\"98\" class=\"relative\">\n        <TraceTable :resource=\"resource\" :related-policies=\"relatedPolicies\" />\n      </Tab>\n\n      <Tab #default=\"props\" name=\"policy-metrics\" label=\"Metrics\" :weight=\"97\" class=\"relative\">\n        <MetricsTab :resource=\"resource\" :policy-server-obj=\"value\" :active=\"props.active\" />\n      </Tab>\n    </ResourceTabs>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.relative {\n  position: relative;\n}\n\n.policy {\n  &__mode {\n    display: flex;\n    align-items: center;\n\n    i {\n      margin-left: 5px;\n      font-size: 22px;\n      color: var(--warning);\n    }\n  }\n}\n\n.gaugesContainer {\n  display: flex;\n}\n\n.gauges {\n  display: flex;\n  justify-content: space-around;\n\n  flex-wrap: wrap;\n  justify-content: left;\n\n  .count-gauge {\n    width: 46%;\n    margin-bottom: 10px;\n    flex: initial;\n  }\n\n  & > *{\n    flex: 1;\n    margin-right: $column-gutter;\n  }\n}\n</style>\n","import { render } from \"./policies.kubewarden.io.policyserver.vue?vue&type=template&id=4044d828&scoped=true\"\nimport script from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js\"\n\nimport \"./policies.kubewarden.io.policyserver.vue?vue&type=style&index=0&id=4044d828&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4044d828\"]])\n\nexport default __exports__","var map = {\n\t\"./kubewarden-dashboard-policy.json\": [\n\t\t18938,\n\t\t521\n\t],\n\t\"./kubewarden-dashboard-policyserver.json\": [\n\t\t65682,\n\t\t712\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 9551;\nmodule.exports = webpackAsyncContext;","<script>\nimport { _CREATE } from '@shell/config/query-params';\n\nimport { KUBEWARDEN } from '@kubewarden/types';\n\nimport PolicyDetail from '@kubewarden/components/Policies/PolicyDetail';\n\nexport default {\n  name: 'AdmissionPolicy',\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  components: { PolicyDetail },\n\n  data() {\n    return { resource: KUBEWARDEN.ADMISSION_POLICY };\n  }\n};\n</script>\n\n<template>\n  <PolicyDetail :value=\"value\" :mode=\"mode\" :resource=\"resource\" />\n</template>\n","import { render } from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=template&id=ae340e96\"\nimport script from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".checklist__container[data-v-9013874c]{display:flex;justify-content:center;flex-direction:column;border:1px solid var(--border);padding:10px}.checklist__config[data-v-9013874c],.checklist__step[data-v-9013874c]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.checklist__step[data-v-9013874c]{min-height:40px}.conflicting-banner[data-v-9013874c]{display:flex;flex-direction:column}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\nimport semver from 'semver';\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\nimport { CATALOG, SERVICE } from '@shell/config/types';\nimport { KUBERNETES } from '@shell/config/labels-annotations';\nimport ResourceFetch from '@shell/mixins/resource-fetch';\nimport { allHash } from '@shell/utils/promise';\n\nimport { BadgeState } from '@components/BadgeState';\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\nimport SortableTable from '@shell/components/SortableTable';\n\nimport { TRACE_HEADERS } from '@kubewarden/config/table-headers';\nimport { KUBEWARDEN, KUBEWARDEN_CHARTS, MODE_MAP, OPERATION_MAP } from '@kubewarden/types';\nimport { jaegerTraces } from '@kubewarden/modules/jaegerTracing';\nimport { formatDuration } from '@kubewarden/utils/duration-format';\n\nimport TraceChecklist from './TraceChecklist';\n\ndayjs.extend(relativeTime);\n\nexport default {\n  props: {\n    resource: {\n      type:    String,\n      default: () => ''\n    },\n    relatedPolicies: {\n      type:    Array,\n      default: () => []\n    },\n    policy: {\n      type:    Object,\n      default: () => {}\n    }\n  },\n\n  components: {\n    BadgeState,\n    Banner,\n    Loading,\n    SortableTable,\n    TraceChecklist\n  },\n\n  mixins: [ResourceFetch],\n\n  async fetch() {\n    const types = [CATALOG.APP, CATALOG.CLUSTER_REPO, SERVICE];\n    const hash = [];\n\n    for (const type of types) {\n      if (this.$store.getters['cluster/canList'](type)) {\n        hash.push(this.$fetchType(type));\n      }\n    }\n\n    await allHash(hash);\n\n    if (this.jaegerQuerySvc) {\n      const options = {\n        store:           this.$store,\n        queryService:    this.jaegerQuerySvc,\n        resource:        this.resource,\n        relatedPolicies: null,\n        policy:          null\n      };\n\n      if (this.resource === KUBEWARDEN.POLICY_SERVER) {\n        options.relatedPolicies = this.relatedPolicies;\n      } else {\n        options.policy = this.policy;\n      }\n\n      this.specificValidations = await jaegerTraces(options);\n    }\n\n    if (this.controllerApp) {\n      await this.controllerApp.fetchValues(true);\n    }\n  },\n\n  data() {\n    return {\n      MODE_MAP,\n      TRACE_HEADERS,\n      OPERATION_MAP,\n\n      specificValidations:      null,\n      outdatedTelemetrySpec:    false,\n      unsupportedTelemetrySpec: false,\n      incompleteTelemetrySpec:  false\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...mapGetters({\n      charts:           'catalog/charts',\n      refreshingCharts: 'kubewarden/refreshingCharts'\n    }),\n\n    allApps() {\n      return this.$store.getters['cluster/all'](CATALOG.APP);\n    },\n\n    allServices() {\n      return this.$store.getters['cluster/all'](SERVICE);\n    },\n\n    controllerApp() {\n      return this.allApps?.find((app) => app?.spec?.chart?.metadata?.name === KUBEWARDEN_CHARTS.CONTROLLER);\n    },\n\n    controllerChart() {\n      return this.charts?.find((chart) => chart?.chartName === KUBEWARDEN_CHARTS.CONTROLLER);\n    },\n\n    groupField() {\n      if (this.isPolicyServer) {\n        return 'policy_id';\n      }\n\n      return null;\n    },\n\n    isPolicyServer() {\n      return this.resource === KUBEWARDEN.POLICY_SERVER;\n    },\n\n    emptyPolicies() {\n      if (this.resource === KUBEWARDEN.POLICY_SERVER) {\n        return isEmpty(this.relatedPolicies);\n      }\n\n      return isEmpty(this.policy);\n    },\n\n    emptyTraces() {\n      return isEmpty(this.filteredValidations);\n    },\n\n    emptyTracesLabel() {\n      if (this.resource === KUBEWARDEN.POLICY_SERVER) {\n        return 'kubewarden.tracing.noRelatedTraces';\n      }\n\n      return 'kubewarden.tracing.noTraces';\n    },\n\n    rowsPerPage() {\n      if (this.isPolicyServer) {\n        return 40;\n      }\n\n      return 20;\n    },\n\n    tracingConfiguration() {\n      if (!this.controllerApp) {\n        return null;\n      }\n\n      const version = this.controllerApp?.spec?.chart?.metadata?.version;\n      const telemetry = this.controllerApp?.values?.telemetry;\n\n      if (semver.gte(version, '4.0.0-0')) {\n        // In version 4+, telemetry.tracing should be boolean or undefined (treated as false).\n        // sidecar.tracing is only meaningful if telemetry.tracing === true.\n\n        const tracingIsUndefinedOrBoolean = telemetry?.tracing === undefined || typeof telemetry?.tracing === 'boolean';\n        const endpointIsDefined = !!telemetry?.sidecar?.tracing?.jaeger?.endpoint;\n\n        // Check for unsupported 'custom' mode\n        if (telemetry?.mode === 'custom') {\n          this.handleTracingChecklist('unsupportedTelemetrySpec', true);\n\n          return null;\n        }\n\n        // If tracing is not undefined or boolean, it's outdated\n        if (!tracingIsUndefinedOrBoolean) {\n          this.handleTracingChecklist('outdatedTelemetrySpec', true);\n\n          return null;\n        }\n\n        // If telemetry.tracing is true, ensure sidecar.tracing is defined\n        if (telemetry?.tracing === true && !endpointIsDefined) {\n          this.handleTracingChecklist('incompleteTelemetrySpec', true);\n\n          return null;\n        }\n\n        // If telemetry.tracing is undefined or false, treat it as false.\n        // sidecar config is irrelevant in that case, and not considered outdated.\n        if (telemetry?.tracing !== true) {\n          // tracing is off, no sidecar config needed\n          return null;\n        }\n\n        // If we get here, telemetry.tracing === true and endpointIsDefined === true\n        return telemetry?.sidecar?.tracing;\n      } else {\n        // Old schema: just return telemetry.tracing.enabled\n        return telemetry?.tracing?.enabled;\n      }\n    },\n\n    jaegerServices() {\n      return this.allServices?.filter((svc) => svc?.metadata?.labels?.['app.kubernetes.io/part-of'] === 'jaeger');\n    },\n\n    jaegerQuerySvc() {\n      if (!isEmpty(this.jaegerServices)) {\n        return this.jaegerServices.find((svc) => {\n          const ports = svc?.spec?.ports;\n\n          if (ports.length) {\n            return ports.find((p) => p.port === 16685 || p.port === 16686);\n          }\n        });\n      }\n\n      return null;\n    },\n\n    openTelemetryServices() {\n      return this.allServices?.filter((svc) => svc?.metadata?.labels?.[KUBERNETES.MANAGED_NAME] === 'opentelemetry-operator');\n    },\n\n    openTelSvc() {\n      if (!isEmpty(this.openTelemetryServices)) {\n        return this.openTelemetryServices.find((svc) => {\n          const ports = svc?.spec?.ports;\n\n          if (ports.length) {\n            return ports.find((p) => p.port === 8080);\n          }\n        });\n      }\n\n      return null;\n    },\n\n    showChecklist() {\n      return (!this.openTelSvc || !this.jaegerQuerySvc || !this.tracingConfiguration);\n    },\n\n    showTable() {\n      return (!this.emptyPolicies && !this.showChecklist && !this.emptyTraces);\n    },\n\n    filteredValidations() {\n      if (!isEmpty(this.specificValidations)) {\n        return this.specificValidations.flatMap((v) => {\n          if (this.currentCluster?.id === v.cluster) {\n            return v.traces;\n          } else {\n            return [];\n          }\n        });\n      }\n\n      return [];\n    }\n  },\n\n  methods: {\n    modeColor(mode) {\n      return this.MODE_MAP[mode];\n    },\n\n    opColor(op) {\n      return this.OPERATION_MAP[op];\n    },\n\n    formatTime(time) {\n      return dayjs(time / 1000);\n    },\n\n    duration(duration) {\n      return formatDuration(duration);\n    },\n\n    handleTracingChecklist(prop, val) {\n      this[prop] = val;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending || refreshingCharts\" mode=\"relative\" />\n  <div v-else>\n    <TraceChecklist\n      v-if=\"showChecklist\"\n      :controller-app=\"controllerApp\"\n      :controller-chart=\"controllerChart\"\n      :tracing-configuration=\"tracingConfiguration\"\n      :jaeger-query-svc=\"jaegerQuerySvc\"\n      :open-tel-svc=\"openTelSvc\"\n      :outdated-telemetry-spec=\"outdatedTelemetrySpec\"\n      :unsupported-telemetry-spec=\"unsupportedTelemetrySpec\"\n      :incomplete-telemetry-spec=\"incompleteTelemetrySpec\"\n    />\n\n    <Banner\n      v-else-if=\"!showChecklist && emptyPolicies\"\n      color=\"error\"\n      :label=\"t('kubewarden.tracing.noRelatedPolicies')\"\n    />\n\n    <SortableTable\n      v-else-if=\"showTable\"\n      :rows=\"filteredValidations\"\n      :headers=\"TRACE_HEADERS\"\n      :table-actions=\"false\"\n      :row-actions=\"false\"\n      key-field=\"id\"\n      default-sort-by=\"startTime\"\n      :sub-expandable=\"true\"\n      :sub-expand-column=\"true\"\n      :sub-rows=\"true\"\n      :paging=\"true\"\n      :rows-per-page=\"rowsPerPage\"\n    >\n      <template #col:mode=\"{row}\">\n        <td>\n          <BadgeState\n            :label=\"row.mode\"\n            :color=\"modeColor(row.mode)\"\n            class=\"text-capitalize\"\n          />\n        </td>\n      </template>\n\n      <template #col:name=\"{row}\">\n        <td class=\"text-bold\">\n          {{ row.name }}\n        </td>\n      </template>\n\n      <template #col:namespace=\"{row}\">\n        <td>\n          {{ row.namespace ? row.namespace : '-' }}\n        </td>\n      </template>\n\n      <template #col:startTime=\"{row}\">\n        <td>\n          {{ formatTime(row.startTime) }}\n        </td>\n      </template>\n\n      <template #col:duration=\"{row}\">\n        <td>\n          {{ duration(row.duration) }}\n        </td>\n      </template>\n\n      <template #sub-row=\"{row, fullColspan}\">\n        <td :colspan=\"fullColspan\" class=\"sub-row\">\n          <div class=\"details\">\n            <section class=\"col\">\n              <div class=\"title\">\n                Response Message\n              </div>\n              <span class=\"text-info text-capitalize\">\n                {{ row.responseMessage ? row.responseMessage : '-' }}\n              </span>\n            </section>\n            <section class=\"col\">\n              <div class=\"title\">\n                Response Code\n              </div>\n              <span class=\"text-info\">\n                {{ row.responseCode ? row.responseCode : '-' }}\n              </span>\n            </section>\n            <section class=\"col\">\n              <div class=\"title\">\n                Mutated\n              </div>\n              <span class=\"text-info\">\n                {{ row.mutated }}\n              </span>\n            </section>\n          </div>\n        </td>\n      </template>\n    </SortableTable>\n\n    <Banner\n      v-else\n      color=\"warning\"\n      :label=\"t(emptyTracesLabel)\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.policy-table-container {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.filter {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-self: flex-end;\n  align-items: center;\n\n  & > * {\n    margin: 10px;\n    max-width: 33%;\n  }\n  & > *:first-child {\n    margin-left: 0;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n\n  &__category {\n    min-width: 200px;\n    height: unset;\n  }\n\n  &__search, &__reset {\n    height: 61px;\n  }\n}\n</style>\n","import dayjs from 'dayjs';\nimport _dropWhile from 'lodash/dropWhile';\nimport _round from 'lodash/round';\nimport _duration from 'dayjs/plugin/duration';\n\ndayjs.extend(_duration);\n\nexport const STANDARD_DATE_FORMAT = 'YYYY-MM-DD';\nexport const STANDARD_TIME_FORMAT = 'HH:mm';\nexport const STANDARD_DATETIME_FORMAT = 'MMMM D YYYY, HH:mm:ss.SSS';\n\n/** @constant 1ms as the number of microseconds, which is the precision of Jaeger timestamps */\nexport const ONE_MILLISECOND = 1000 * 1;\n\nconst ONE_SECOND = 1000 * ONE_MILLISECOND;\nconst ONE_MINUTE = 60 * ONE_SECOND;\nconst ONE_HOUR = 60 * ONE_MINUTE;\nconst ONE_DAY = 24 * ONE_HOUR;\n\nconst UNIT_STEPS: { unit: string; microseconds: number; ofPrevious: number }[] = [\n  {\n    unit:         'd',\n    microseconds: ONE_DAY,\n    ofPrevious:   24\n  },\n  {\n    unit:         'h',\n    microseconds: ONE_HOUR,\n    ofPrevious:   60\n  },\n  {\n    unit:         'm',\n    microseconds: ONE_MINUTE,\n    ofPrevious:   60\n  },\n  {\n    unit:         's',\n    microseconds: ONE_SECOND,\n    ofPrevious:   1000\n  },\n  {\n    unit:         'ms',\n    microseconds: ONE_MILLISECOND,\n    ofPrevious:   1000\n  },\n  {\n    unit:         'μs',\n    microseconds: 1,\n    ofPrevious:   1000\n  },\n];\n\nexport function formatDuration(duration: number): string {\n  // Drop all units that are too large except the last one\n  const [primaryUnit, secondaryUnit] = _dropWhile(\n    UNIT_STEPS,\n    ({ microseconds }, index) => index < UNIT_STEPS.length - 1 && microseconds > duration\n  );\n\n  if (primaryUnit.ofPrevious === 1000) {\n    // If the unit is decimal based, display as a decimal\n    return `${ _round(duration / primaryUnit.microseconds, 2) }${ primaryUnit.unit }`;\n  }\n\n  const primaryValue = Math.floor(duration / primaryUnit.microseconds);\n  const primaryUnitString = `${ primaryValue }${ primaryUnit.unit }`;\n  const secondaryValue = Math.round((duration / secondaryUnit.microseconds) % primaryUnit.ofPrevious);\n  const secondaryUnitString = `${ secondaryValue }${ secondaryUnit.unit }`;\n\n  return secondaryValue === 0 ? primaryUnitString : `${ primaryUnitString } ${ secondaryUnitString }`;\n}","<script>\nimport { mapGetters } from 'vuex';\n\nimport { CATALOG } from '@shell/config/labels-annotations';\nimport {\n  REPO_TYPE, REPO, CHART, NAME, VERSION, NAMESPACE\n} from '@shell/config/query-params';\n\nimport { Banner } from '@components/Banner';\n\nexport default {\n  props: {\n    controllerApp: {\n      type:    Object,\n      default: null\n    },\n    controllerChart: {\n      type:    Object,\n      default: null\n    },\n    tracingConfiguration: {\n      type:    Object,\n      default: null\n    },\n    jaegerQuerySvc: {\n      type:    Object,\n      default: null\n    },\n    openTelSvc: {\n      type:    Object,\n      default: null\n    },\n    outdatedTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    },\n    unsupportedTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    },\n    incompleteTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  components: { Banner },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n\n    controllerLinkTooltip() {\n      if (!this.openTelSvc || !this.jaegerQuerySvc) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.prerequisites');\n      }\n\n      if (!this.controllerApp || !this.controllerChart) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.chartError', { chart: 'Kubewarden Controller' }, true);\n      }\n\n      return null;\n    },\n\n    controllerLinkDisabled() {\n      return !this.openTelSvc || !this.jaegerQuerySvc || !this.controllerApp || !this.controllerChart;\n    },\n\n    tracingEnabled() {\n      if (this.tracingConfiguration) {\n        return this.tracingConfiguration.enabled;\n      }\n\n      return null;\n    }\n  },\n\n  methods: {\n    badgeIcon(prop) {\n      return {\n        'icon-dot-open':  !prop,\n        'icon-checkmark': prop,\n        'text-success':   prop\n      };\n    },\n\n    controllerAppRoute() {\n      if (this.controllerApp) {\n        const metadata = this.controllerApp.spec?.chart?.metadata;\n\n        const query = {\n          [NAMESPACE]: metadata?.annotations?.[CATALOG.NAMESPACE],\n          [NAME]:      metadata?.annotations?.[CATALOG.RELEASE_NAME],\n          [VERSION]:   metadata?.annotations?.['catalog.cattle.io/upstream-version'],\n          [REPO]:      metadata?.annotations?.[CATALOG.SOURCE_REPO_NAME],\n          [REPO_TYPE]: metadata?.annotations?.[CATALOG.SOURCE_REPO_TYPE],\n          [CHART]:     metadata?.name\n        };\n\n        this.$router.push({\n          name:   'c-cluster-apps-charts-install',\n          params: { cluster: this.currentCluster?.id || '_' },\n          query,\n        });\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <p class=\"checklist__description mb-20\" data-testid=\"kw-tracing-checklist-description\">\n      {{ t('kubewarden.tracing.description') }}\n    </p>\n    <div class=\"checklist__prereq mb-20\">\n      <h2>{{ t('kubewarden.tracing.prerequisites.label') }}</h2>\n      <p>{{ t('kubewarden.tracing.prerequisites.description') }}</p>\n    </div>\n    <Banner\n      color=\"warning\"\n      :label=\"t('kubewarden.tracing.prerequisites.warning')\"\n    />\n    <div class=\"checklist__container mt-20 mb-20\">\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-tracing-checklist-step-open-tel\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(openTelSvc)\" />\n        <p v-clean-html=\"t('kubewarden.tracing.openTelemetry', {}, true)\" />\n      </div>\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-tracing-checklist-step-jaeger\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(jaegerQuerySvc)\" />\n        <p v-clean-html=\"t('kubewarden.tracing.jaeger', {}, true)\" p />\n      </div>\n\n      <!-- Telemetry banners -->\n      <div>\n        <Banner\n          v-if=\"outdatedTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.tracing.prerequisites.outdated')\"\n        />\n        <Banner\n          v-if=\"unsupportedTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.tracing.prerequisites.unsupported')\"\n        />\n        <Banner\n          v-if=\"incompleteTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.tracing.prerequisites.incomplete')\"\n        />\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-tracing-checklist-step-config\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(tracingEnabled)\" />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.tracing.config.label', {}, true)\" />\n          <button\n            v-clean-tooltip=\"controllerLinkTooltip\"\n            data-testid=\"kw-tracing-checklist-step-config-button\"\n            class=\"btn role-primary ml-10\"\n            :disabled=\"controllerLinkDisabled\"\n            @click=\"controllerAppRoute\"\n          >\n            {{ t(\"kubewarden.tracing.config.link\") }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.checklist {\n  &__container {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    border: 1px solid var(--border);\n    padding: 10px;\n  }\n\n  &__step, &__config {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n  }\n\n  &__step {\n    min-height: 40px;\n  }\n}\n</style>","import { render } from \"./TraceChecklist.vue?vue&type=template&id=7139a8b0&scoped=true\"\nimport script from \"./TraceChecklist.vue?vue&type=script&lang=js\"\nexport * from \"./TraceChecklist.vue?vue&type=script&lang=js\"\n\nimport \"./TraceChecklist.vue?vue&type=style&index=0&id=7139a8b0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7139a8b0\"]])\n\nexport default __exports__","import { render } from \"./TraceTable.vue?vue&type=template&id=01307b5c&scoped=true\"\nimport script from \"./TraceTable.vue?vue&type=script&lang=js\"\nexport * from \"./TraceTable.vue?vue&type=script&lang=js\"\n\nimport \"./TraceTable.vue?vue&type=style&index=0&id=01307b5c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-01307b5c\"]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./MetricsChecklist.vue?vue&type=style&index=0&id=9013874c&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8f0df8c6\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\nimport debounce from 'lodash/debounce';\nimport semver from 'semver';\n\nimport {\n  CATALOG, CONFIG_MAP, MONITORING, NAMESPACE, SERVICE\n} from '@shell/config/types';\nimport { KUBERNETES } from '@shell/config/labels-annotations';\nimport { dashboardExists } from '@shell/utils/grafana';\nimport { monitoringStatus } from '@shell/utils/monitoring';\nimport { allHash } from '@shell/utils/promise';\nimport ResourceFetch from '@shell/mixins/resource-fetch';\n\nimport DashboardMetrics from '@shell/components/DashboardMetrics';\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\n\nimport { KUBEWARDEN, KUBEWARDEN_CHARTS, KubewardenDashboardLabels, KubewardenDashboards } from '@kubewarden/types';\nimport { handleGrowl } from '@kubewarden/utils/handle-growl';\nimport { refreshCharts } from '@kubewarden/utils/chart';\nimport { grafanaProxy } from '@kubewarden/modules/grafana';\nimport { findServiceMonitor } from '@kubewarden/modules/metricsConfig';\nimport { jaegerPolicyName } from '@kubewarden/modules/jaegerTracing';\n\nimport MetricsChecklist from './MetricsChecklist';\n\nexport default {\n  props: {\n    active: {\n      type:    Boolean,\n      default: null\n    },\n    resource: {\n      type:    String,\n      default: null\n    },\n    policyObj: {\n      type:    Object,\n      default: null\n    },\n    policyServerObj: {\n      type:    Object,\n      default: null\n    }\n  },\n\n  components: {\n    Banner,\n    DashboardMetrics,\n    Loading,\n    MetricsChecklist\n  },\n\n  mixins: [ResourceFetch],\n\n  async fetch() {\n    this.debouncedRefreshCharts = debounce((init = false) => {\n      refreshCharts({\n        store:     this.$store,\n        chartName: 'rancher-monitoring',\n        init\n      });\n    }, 500);\n\n    const resourceMap = [\n      {\n        name:     CATALOG.APP,\n        property: this.allApps\n      },\n      {\n        name:     CATALOG.CLUSTER_REPO,\n        property: this.allRepos\n      },\n      {\n        name:     CONFIG_MAP,\n        property: this.allConfigMaps\n      },\n      {\n        name:     KUBEWARDEN.POLICY_SERVER,\n        property: this.allPolicyServers\n      },\n      {\n        name:     MONITORING.SERVICEMONITOR,\n        property: this.allServiceMonitors\n      },\n      {\n        name:     NAMESPACE,\n        property: this.allNamespaces\n      },\n      {\n        name:     SERVICE,\n        property: this.allServices\n      },\n    ];\n    const hash = [];\n\n    // Check if the resources are already stored with their respective getters before fetching\n    for (const resource of resourceMap) {\n      if (isEmpty(resource.property) && this.$store.getters['cluster/canList'](resource.name)) {\n        hash.push(this.$fetchType(resource.name));\n      }\n    }\n\n    await allHash(hash);\n\n    if (this.showChecklist && !this.monitoringChart) {\n      this.debouncedRefreshCharts(true);\n    }\n\n    // If monitoring is installed look for the dashboard based on the METRICS_TYPE\n    if (this.monitoringStatus.installed) {\n      try {\n        this.metricsProxy = await grafanaProxy({\n          store: this.$store,\n          type:  this.METRICS_TYPE\n        });\n\n        if (this.metricsProxy) {\n          this.metricsService = await dashboardExists('v2', this.$store, this.currentCluster?.id, this.metricsProxy);\n        }\n      } catch (e) {\n        const error = {\n          _statusText: 'Error',\n          message:     `Error fetching Grafana Service: ${ e }`\n        };\n\n        handleGrowl({\n          error,\n          store: this.$store\n        });\n      }\n    }\n\n    if (this.controllerApp) {\n      await this.controllerApp.fetchValues(true);\n    }\n  },\n\n  data() {\n    const METRICS_TYPE = this.resource === KUBEWARDEN.POLICY_SERVER ? KubewardenDashboards.POLICY_SERVER : KubewardenDashboards.POLICY;\n\n    return {\n      METRICS_TYPE,\n\n      [CATALOG.APP]:               null,\n      [CATALOG.CLUSTER_REPO]:      null,\n      [CONFIG_MAP]:                null,\n      [MONITORING.SERVICEMONITOR]: null,\n      [SERVICE]:                   null,\n      metricsProxy:                null,\n      metricsService:              null,\n      debouncedRefreshCharts:      null,\n      outdatedTelemetrySpec:       false,\n      unsupportedTelemetrySpec:    false,\n    };\n  },\n\n  watch: {\n    async grafanaService() {\n      if (!this.metricsProxy) {\n        this.metricsProxy = await grafanaProxy({\n          store: this.$store,\n          type:  this.METRICS_TYPE\n        });\n\n        if (this.metricsProxy) {\n          this.metricsService = await dashboardExists('v2', this.$store, this.currentCluster?.id, this.metricsProxy);\n        }\n      }\n    }\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster', 'productId']),\n    ...mapGetters({ charts: 'catalog/charts' }),\n    ...monitoringStatus(),\n\n    policyName() {\n      return jaegerPolicyName(this.policyObj);\n    },\n\n    allApps() {\n      return this.$store.getters['cluster/all'](CATALOG.APP);\n    },\n\n    allRepos() {\n      return this.$store.getters['cluster/all'](CATALOG.CLUSTER_REPO);\n    },\n\n    allConfigMaps() {\n      return this.$store.getters['cluster/all'](CONFIG_MAP);\n    },\n\n    allNamespaces() {\n      return this.$store.getters['cluster/all'](NAMESPACE);\n    },\n\n    allPolicyServers() {\n      return this.$store.getters['cluster/all'](KUBEWARDEN.POLICY_SERVER);\n    },\n\n    allServiceMonitors() {\n      return this.$store.getters['cluster/all'](MONITORING.SERVICEMONITOR);\n    },\n\n    allServices() {\n      return this.$store.getters['cluster/all'](SERVICE);\n    },\n\n    cattleDashboardNs() {\n      return this.allNamespaces?.find((ns) => ns?.metadata?.name === 'cattle-dashboards');\n    },\n\n    conflictingGrafanaDashboards() {\n      return this.allConfigMaps?.filter((configMap) => {\n        const name = configMap?.metadata?.name;\n\n        if (name) {\n          return name === KubewardenDashboards.POLICY_SERVER || name === KubewardenDashboards.POLICY;\n        }\n      });\n    },\n\n    controllerApp() {\n      return this.allApps?.find((app) => app?.spec?.chart?.metadata?.name === KUBEWARDEN_CHARTS.CONTROLLER);\n    },\n\n    controllerChart() {\n      return this.charts?.find((chart) => chart.chartName === KUBEWARDEN_CHARTS.CONTROLLER);\n    },\n\n    grafanaService() {\n      const monitoringServices = this.allServices?.filter((svc) => svc?.metadata?.labels?.['app.kubernetes.io/instance'] === 'rancher-monitoring');\n\n      return monitoringServices?.find((svc) => svc?.metadata?.labels?.['app.kubernetes.io/name'] === 'grafana');\n    },\n\n    kubewardenGrafanaDashboards() {\n      return this.allConfigMaps?.filter((configMap) => configMap?.metadata?.labels?.[KubewardenDashboardLabels.DASHBOARD]);\n    },\n\n    kubewardenServiceMonitor() {\n      return findServiceMonitor({\n        policyObj:          this.policyObj,\n        policyServerObj:    this.policyServerObj,\n        controllerNs:       this.controllerApp?.metadata?.namespace,\n        allServiceMonitors: this.allServiceMonitors\n      });\n    },\n\n    metricsConfiguration() {\n      if (!this.controllerApp) {\n        console.log('# 0');\n\n        return null;\n      }\n\n      const version = this.controllerApp?.spec?.chart?.metadata?.version;\n      const telemetry = this.controllerApp?.values?.telemetry;\n\n      if (semver.gte(version, '4.0.0-0')) {\n        // In version 4+, telemetry.metrics should be boolean or undefined (treated as false).\n        // sidecar.metrics is only meaningful if telemetry.metrics === true.\n        const metricsIsUndefinedOrBoolean = telemetry?.metrics === undefined || typeof telemetry?.metrics === 'boolean';\n\n        // Check for unsupported 'custom' mode\n        if (telemetry?.mode === 'custom') {\n          this.handleMetricsChecklist('unsupportedTelemetrySpec', true);\n\n          return null;\n        }\n\n        // If metrics is not undefined or boolean, it's outdated\n        if (!metricsIsUndefinedOrBoolean) {\n          this.handleMetricsChecklist('outdatedTelemetrySpec', true);\n\n          return null;\n        }\n\n        // If telemetry.metrics is undefined or false, treat it as false.\n        // sidecar config is irrelevant in that case, and not considered outdated.\n        if (telemetry?.metrics !== true) {\n          // metrics is off, no sidecar config needed\n          return null;\n        }\n\n        // If we get here, telemetry.metrics === true and portIsDefined === true\n        return telemetry?.metrics;\n      } else {\n        // Old schema: just return telemetry.metrics.enabled\n        return telemetry?.metrics?.enabled;\n      }\n    },\n\n    monitoringApp() {\n      return this.allApps?.find((app) => app?.spec?.chart?.metadata?.name === 'rancher-monitoring');\n    },\n\n    monitoringChart() {\n      return this.charts?.find((chart) => chart.chartName === 'rancher-monitoring');\n    },\n\n    openTelemetryServices() {\n      if (this.allServices) {\n        return this.allServices.filter((svc) => svc?.metadata?.labels?.[KUBERNETES.MANAGED_NAME] === 'opentelemetry-operator');\n      }\n\n      return null;\n    },\n\n    openTelSvc() {\n      if (!isEmpty(this.openTelemetryServices)) {\n        return this.openTelemetryServices.find((svc) => {\n          const ports = svc?.spec?.ports;\n\n          if (ports.length) {\n            return ports.find((p) => p.port === 8080);\n          }\n        });\n      }\n\n      return null;\n    },\n\n    policyServerSvcs() {\n      if (!isEmpty(this.allPolicyServers)) {\n        const policyServerNames = this.allPolicyServers.map((ps) => ps?.metadata?.name);\n        const out = [];\n\n        for (const ps of policyServerNames) {\n          out.push(this.allServices?.find((svc) => svc?.metadata?.labels?.app === `kubewarden-policy-server-${ ps }`));\n        }\n\n        return out;\n      }\n\n      return null;\n    },\n\n    showChecklist() {\n      const grafanaDashboardsInstalled = !isEmpty(this.kubewardenGrafanaDashboards);\n\n      return !this.openTelSvc || !this.monitoringApp || !this.kubewardenServiceMonitor || !this.metricsConfiguration || !grafanaDashboardsInstalled;\n    }\n  },\n\n  methods: {\n    async updateServiceMonitors() {\n      await this.$fetchType(MONITORING.SERVICEMONITOR);\n    },\n\n    handleMetricsChecklist(prop, val) {\n      this[prop] = val;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" mode=\"relative\" />\n  <div v-else>\n    <MetricsChecklist\n      v-if=\"showChecklist\"\n      :cattle-dashboard-ns=\"cattleDashboardNs\"\n      :conflicting-grafana-dashboards=\"conflictingGrafanaDashboards\"\n      :controller-app=\"controllerApp\"\n      :controller-chart=\"controllerChart\"\n      :kubewarden-service-monitor=\"kubewardenServiceMonitor\"\n      :kubewarden-dashboards=\"kubewardenGrafanaDashboards\"\n      :metrics-configuration=\"metricsConfiguration\"\n      :monitoring-app=\"monitoringApp\"\n      :monitoring-chart=\"monitoringChart\"\n      :open-tel-svc=\"openTelSvc\"\n      :policy-obj=\"policyObj\"\n      :policy-server-obj=\"policyServerObj\"\n      :outdated-telemetry-spec=\"outdatedTelemetrySpec\"\n      :unsupported-telemetry-spec=\"unsupportedTelemetrySpec\"\n      @updateServiceMonitors=\"updateServiceMonitors\"\n    />\n\n    <template v-if=\"!showChecklist\">\n      <Banner\n        v-if=\"monitoringApp && !metricsProxy\"\n        color=\"error\"\n        :label=\"t('kubewarden.monitoring.warning.noProxy')\"\n      />\n      <DashboardMetrics\n        v-if=\"metricsProxy && active\"\n        data-testid=\"kw-ps-metrics-dashboard\"\n        :detail-url=\"metricsProxy\"\n        :summary-url=\"metricsProxy\"\n        :vars=\"{'policy_name': policyName}\"\n        graph-height=\"825px\"\n      />\n    </template>\n  </div>\n</template>\n","import isEmpty from 'lodash/isEmpty';\n\nimport { CONFIG_MAP, SERVICE } from '@shell/config/types';\n\nimport {\n  CatalogApp,\n  KubewardenDashboards,\n  KubewardenDashboardLabels,\n  GrafanaDashboardLabels,\n  GrafanaDashboardAnnotations,\n  HelmAnnotations\n} from '../types';\nimport { handleGrowl, GrowlConfig } from '../utils/handle-growl';\n\ninterface MetricsConfig {\n  store: any,\n  type: string\n}\n\ninterface DashboardConfig {\n  store: any,\n  monitoringApp: CatalogApp,\n  controllerApp: CatalogApp\n}\n\nexport async function grafanaProxy(config: MetricsConfig): Promise<any> {\n  const { store, type } = config;\n\n  try {\n    const grafana = await grafanaService(store);\n\n    if (!isEmpty(grafana)) {\n      const base = `/api/v1/namespaces/${ grafana.metadata.namespace }/services`;\n      const proxy = `/http:${ grafana.metadata.name }:80/proxy`;\n      const path = `/d/${ type }?orgId=1&kiosk`;\n\n      return base + proxy + path;\n    }\n  } catch (e) {\n    handleGrowl({\n      error: e as GrowlConfig | any,\n      store,\n      type:  'warning'\n    });\n  }\n\n  return null;\n}\n\nexport async function grafanaService(store: any) {\n  try {\n    return await store.dispatch('cluster/find', {\n      type: SERVICE,\n      id:   'cattle-monitoring-system/rancher-monitoring-grafana'\n    }, { root: true });\n  } catch (e) {\n    handleGrowl({\n      error: e as GrowlConfig | any,\n      store,\n      type:  'warning'\n    });\n  }\n}\n\nexport async function findKubewardenDashboards(store: any) {\n  try {\n    return await store.dispatch('cluster/findMatching', {\n      type:     CONFIG_MAP,\n      selector: `kubewarden/part-of=cattle-kubewarden-system`\n    });\n  } catch (e) {\n    handleGrowl({\n      error: e as GrowlConfig | any,\n      store,\n      type:  'warning'\n    });\n  }\n}\n\n/**\n   * Creates a ConfigMap for the Grafana dashboard depending on the type supplied\n   * @param `store, type` | Type of resource ( PolicyServer || (Cluster)AdmissionPolicy )\n   */\nexport async function addKubewardenDashboards(config: DashboardConfig): Promise<void> {\n  const { store, monitoringApp, controllerApp } = config;\n\n  if (monitoringApp && controllerApp) {\n    /**\n     * There are 2 dashboards for Kubewarden:\n     * PolicyServer is the default one copied from https://grafana.com/grafana/dashboards/15314-kubewarden/\n     * Policies have a condensed version\n    */\n    const dashboardEnums = Object.values(KubewardenDashboards);\n\n    for (const type of dashboardEnums) {\n      const file = await import(/* webpackChunkName: \"policyDashboard\" */ `../assets/${ type }.json`);\n      const fileKey = `${ type }.json`;\n\n      /** Check for existing configmaps */\n      const existing = await findKubewardenDashboards(store);\n\n      if (existing && existing?.metadata?.name === type) {\n        return;\n      }\n\n      const labels: GrafanaDashboardLabels = {\n        [KubewardenDashboardLabels.DASHBOARD]:         type,\n        [KubewardenDashboardLabels.PART_OF]:           controllerApp.metadata.namespace,\n        [KubewardenDashboardLabels.APP]:               'rancher-monitoring-grafana',\n        [KubewardenDashboardLabels.GRAFANA_DASHBOARD]: '1',\n        'app.kubernetes.io/instance':                  monitoringApp.metadata.name\n      };\n\n      const annotations: GrafanaDashboardAnnotations = {\n        [HelmAnnotations.NAME]:      monitoringApp.metadata.name,\n        [HelmAnnotations.NAMESPACE]: monitoringApp.metadata.namespace\n      };\n\n      const configMapTemplate = await store.dispatch(\n        'cluster/create',\n        {\n          type:     CONFIG_MAP,\n          metadata: {\n            annotations,\n            labels,\n            name:        type,\n            namespace:   'cattle-dashboards',\n          },\n          data: { [fileKey]: JSON.stringify(file) },\n        }\n      );\n\n      try {\n        await configMapTemplate.save();\n      } catch (e) {\n        handleGrowl({\n          error: e as GrowlConfig | any,\n          store\n        });\n      }\n    }\n  }\n}","import isEmpty from 'lodash/isEmpty';\nimport { MONITORING } from '@shell/config/types';\n\nimport { CatalogApp, Service, ServiceMonitor, ServiceMonitorSpec } from '@kubewarden/types';\nimport { handleGrowl, GrowlConfig } from '@kubewarden/utils/handle-growl';\n\ntype ServiceMonitorConfigured = {\n  namespace: boolean,\n  selectors?: {[key: string]: boolean}[];\n}\n\ninterface MonitoringConfig {\n  serviceMonitorSpec: ServiceMonitorSpec[],\n  controllerApp: CatalogApp,\n  policyServerSvcs: Service[]\n}\n\ninterface ServiceMonitorConfig {\n  store: any,\n  policyObj?: any,\n  policyServerObj?: any,\n  controllerNs: string,\n  allServiceMonitors?: ServiceMonitor[]\n  serviceMonitor?: ServiceMonitor\n}\n\n/**\n * Determines if the Monitoring App is configured correctly with the namespace and label selectors for\n * the Kubewarden controller and policy servers.\n * @param config `serviceMonitorSpec, controllerApp, policyServerSvcs` | Needs monitoring app service monitor spec,\n * kubewarden controller app, and the policy server services.\n * @returns `boolean` | `true` if configured correctly\n */\nexport function monitoringIsConfigured(config: MonitoringConfig): boolean {\n  const configured = serviceMonitorsConfigured(config);\n\n  if (Array.isArray(configured)) {\n    return configured?.some((c: ServiceMonitorConfigured) => {\n      const selectorsConfigured = !isEmpty(c?.selectors) && c?.selectors?.some((selector) => {\n        for (const key in selector) {\n          if (selector[key] && selector[key] === true) {\n            return true;\n          }\n        }\n\n        return false;\n      });\n\n      return c.namespace && selectorsConfigured;\n    });\n  }\n\n  return false;\n}\n\n/**\n * Searchs for matching `namespaceSelector` and `matchLabels` selector between `serviceMonitorSpec`, `controllerApp`, and `policyServerSvcs`\n * @param config `serviceMonitorSpec, controllerApp, policyServerSvcs` | Needs monitoring app service monitor spec,\n * kubewarden controller app, and the policy server services.\n * @returns `ServiceMonitorConfigured[] | boolean` | If `serviceMonitorSpec` is provided, will return a `ServiceMonitorConfigured` object\n * which contains a `namespace` boolean for a match and selectors[] for `matchLabels`\n */\nexport function serviceMonitorsConfigured(config: MonitoringConfig): ServiceMonitorConfigured[] | boolean {\n  const { serviceMonitorSpec, controllerApp, policyServerSvcs } = config;\n\n  if (serviceMonitorSpec) {\n    return serviceMonitorSpec?.map((sm) => {\n      const configured: ServiceMonitorConfigured = {\n        namespace: false,\n        selectors: []\n      };\n\n      /** Find a matching namespaceSelector to the controllerApp */\n      if (!isEmpty(controllerApp)) {\n        const hasNamespace: boolean = sm.namespaceSelector?.matchNames?.includes(controllerApp?.metadata?.namespace) || false;\n\n        configured.namespace = hasNamespace;\n      }\n\n      /** Find matching label selectors for policy server services */\n      if (!isEmpty(policyServerSvcs)) {\n        policyServerSvcs.forEach((svc) => {\n          if (sm.selector?.matchLabels) {\n            for (const key of Object.keys(sm.selector.matchLabels)) {\n              const hasLabel = svc?.metadata?.labels?.[key] && svc.metadata.labels[key] === sm.selector.matchLabels[key];\n\n              configured?.selectors?.push({ [key]: !!hasLabel });\n            }\n          }\n        });\n      }\n\n      return configured;\n    });\n  }\n\n  return false;\n}\n\n/**\n * Searches provided ServiceMonitors for a matching resource based on the `selector.matchLabels` including:\n * `app=kubewarden-policy-server-<policy-server-id>`\n * @param config: `policyObj?, policyServerObj?, allServiceMonitors` | Needs either a policy object or policy server object with all fetched\n * ServiceMonitors\n * @returns `ServiceMonitor | void`\n */\nexport function findServiceMonitor(config: ServiceMonitorConfig): ServiceMonitor | void {\n  const { policyObj, policyServerObj, allServiceMonitors } = config;\n\n  if (!isEmpty(allServiceMonitors)) {\n    const smName: string = policyObj ? policyObj.spec?.policyServer : policyServerObj?.id;\n\n    return allServiceMonitors?.find((sm) => sm?.spec?.selector?.matchLabels?.['app'] === `kubewarden-policy-server-${ smName }`);\n  }\n}\n\n/**\n * Creates a Service Monitor for a PolicyServer when provided either a PS or a policy\n * @param config: `store, policyObj?, policyServerObj?, controllerNs` | Needs kubewarden-controller app namespace, either a policy server or policy.\n */\nexport async function addKubewardenServiceMonitor(config: ServiceMonitorConfig): Promise<void> {\n  const {\n    store, policyObj, policyServerObj, controllerNs, serviceMonitor\n  } = config;\n\n  if (store.getters['cluster/schemaFor'](MONITORING.SERVICEMONITOR)) {\n    const smName: string = policyObj ? policyObj.spec?.policyServer : policyServerObj?.id;\n\n    const serviceMonitorTemplate: ServiceMonitor = {\n      kind:     'ServiceMonitor',\n      type:     MONITORING.SERVICEMONITOR,\n      metadata: {\n        name:        smName,\n        namespace:   controllerNs\n      },\n      spec: {\n        endpoints:         [{\n          interval: '10s',\n          port:     'metrics'\n        }],\n        namespaceSelector: { matchNames: [controllerNs] },\n        selector:          { matchLabels: { app: `kubewarden-policy-server-${ smName }` } }\n      }\n    };\n\n    if (!serviceMonitor) {\n      const serviceMonitorObj = await store.dispatch(\n        'cluster/create',\n        serviceMonitorTemplate\n      );\n\n      try {\n        await serviceMonitorObj.save();\n      } catch (e) {\n        handleGrowl({\n          error: e as GrowlConfig | any,\n          store\n        });\n      }\n    }\n  }\n}\n","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { CATALOG } from '@shell/config/labels-annotations';\n\nimport {\n  REPO_TYPE, REPO, CHART, NAME, VERSION, NAMESPACE\n} from '@shell/config/query-params';\n\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { Banner } from '@components/Banner';\n\nimport { handleGrowl } from '@kubewarden/utils/handle-growl';\nimport { addKubewardenDashboards } from '@kubewarden/modules/grafana';\nimport { addKubewardenServiceMonitor } from '@kubewarden/modules/metricsConfig';\n\nexport default {\n  props: {\n    cattleDashboardNs: {\n      type:    Object,\n      default: null\n    },\n    conflictingGrafanaDashboards: {\n      type:    Array,\n      default: null\n    },\n    controllerApp: {\n      type:    Object,\n      default: null\n    },\n    controllerChart: {\n      type:    Object,\n      default: null\n    },\n    kubewardenServiceMonitor: {\n      type:    Object,\n      default: null\n    },\n    kubewardenDashboards: {\n      type:    Array,\n      default: null\n    },\n    metricsConfiguration: {\n      type:    Object,\n      default: null\n    },\n    monitoringApp: {\n      type:    Object,\n      default: null\n    },\n    monitoringChart: {\n      type:    Object,\n      default: null\n    },\n    openTelSvc: {\n      type:    Object,\n      default: null\n    },\n    policyObj: {\n      type:    Object,\n      default: null\n    },\n    policyServerObj: {\n      type:    Object,\n      default: null\n    },\n    outdatedTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    },\n    unsupportedTelemetrySpec: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  components: {\n    AsyncButton,\n    Banner\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...mapGetters({ t: 'i18n/t' }),\n\n    controllerLinkDisabled() {\n      return (!this.openTelSvc || !this.monitoringApp || !this.hasKubewardenDashboards || !this.controllerChart || !this.controllerApp);\n    },\n\n    controllerLinkTooltip() {\n      if (this.controllerLinkDisabled) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.prerequisites');\n      }\n\n      if (!this.controllerChart) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.chartError', { chart: 'Kubewarden Controller' }, true);\n      }\n\n      return null;\n    },\n\n    dashboardsTooltip() {\n      if (!this.monitoringApp) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.appNotInstalled', { app: 'Rancher Monitoring' }, true);\n      }\n\n      if (this.monitoringApp && isEmpty(this.cattleDashboardNs)) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.nsNotFound');\n      }\n\n      return null;\n    },\n\n    dashboardButtonDisabled() {\n      return (!this.monitoringApp ||\n              isEmpty(this.cattleDashboardNs) ||\n              (!this.hasKubewardenDashboards && !!this.conflictingGrafanaDashboards.length)\n      );\n    },\n\n    hasKubewardenDashboards() {\n      return !isEmpty(this.kubewardenDashboards);\n    },\n\n    monitoringChartLink() {\n      if (!this.monitoringApp) {\n        return this.t('kubewarden.monitoring.prerequisites.monitoringApp.install');\n      }\n\n      return this.t('kubewarden.monitoring.prerequisites.monitoringApp.edit');\n    },\n\n    monitoringLinkTooltip() {\n      if (!this.monitoringChart) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.chartError', { chart: 'Rancher Monitoring' }, true);\n      }\n\n      return null;\n    },\n\n    serviceMonitorButtonDisabled() {\n      return (!this.controllerApp || !this.monitoringApp);\n    },\n\n    serviceMonitorsTooltip() {\n      if (!this.monitoringApp) {\n        return this.t('kubewarden.monitoring.prerequisites.tooltips.prerequisites');\n      }\n\n      if (!this.kubewardenServiceMonitor && this.controllerApp) {\n        return this.t(\n          'kubewarden.monitoring.prerequisites.tooltips.monitorsNotFound',\n          { namespace: this.controllerApp.metadata?.namespace },\n          true\n        );\n      }\n\n      return null;\n    },\n\n    showConflictingDashboardsBanner() {\n      return !this.hasKubewardenDashboards && !isEmpty(this.conflictingGrafanaDashboards);\n    }\n  },\n\n  methods: {\n    async addDashboards(btnCb) {\n      try {\n        await addKubewardenDashboards({\n          store:         this.$store,\n          monitoringApp: this.monitoringApp,\n          controllerApp: this.controllerApp\n        });\n        btnCb(true);\n      } catch (e) {\n        handleGrowl({\n          error: e,\n          store: this.$store\n        });\n        btnCb(false);\n      }\n    },\n\n    async addServiceMonitor(btnCb) {\n      try {\n        await addKubewardenServiceMonitor({\n          store:           this.$store,\n          policyObj:       this.policyObj,\n          policyServerObj: this.policyServerObj,\n          controllerNs:    this.controllerApp?.metadata?.namespace,\n          serviceMonitor:  this.kubewardenServiceMonitor\n        });\n        this.$emit('updateServiceMonitors');\n        btnCb(true);\n      } catch (e) {\n        handleGrowl({\n          error: e,\n          store: this.$store\n        });\n        btnCb(false);\n      }\n    },\n\n    badgeIcon(prop) {\n      if (Array.isArray(prop)) {\n        const emptyProp = isEmpty(prop);\n\n        return {\n          'icon-dot-open':  emptyProp,\n          'icon-checkmark': !emptyProp,\n          'text-success':   !emptyProp\n        };\n      }\n\n      return {\n        'icon-dot-open':  !prop,\n        'icon-checkmark': prop,\n        'text-success':   prop\n      };\n    },\n\n    monitoringAppRoute() {\n      if (!this.monitoringApp && this.monitoringChart) {\n        this.monitoringChart.goToInstall();\n      }\n\n      if (this.monitoringApp) {\n        const query = {\n          [NAMESPACE]: this.monitoringApp.metadata?.namespace,\n          [NAME]:      this.monitoringApp.metadata?.name,\n          [VERSION]:   this.monitoringApp.spec?.chart?.metadata?.version,\n          [REPO]:      this.monitoringApp.spec?.chart?.metadata?.annotations?.[CATALOG.SOURCE_REPO_NAME],\n          [REPO_TYPE]: this.monitoringApp.spec?.chart?.metadata?.annotations?.[CATALOG.SOURCE_REPO_TYPE],\n          [CHART]:     this.monitoringApp.spec?.chart?.metadata?.name\n        };\n\n        this.$router.push({\n          name:   'c-cluster-apps-charts-install',\n          params: { cluster: this.currentCluster?.id || '_' },\n          query,\n        });\n      }\n    },\n\n    controllerAppRoute() {\n      if (this.controllerApp) {\n        const metadata = this.controllerApp.spec?.chart?.metadata;\n\n        const query = {\n          [NAMESPACE]: metadata?.annotations?.[CATALOG.NAMESPACE],\n          [NAME]:      metadata?.annotations?.[CATALOG.RELEASE_NAME],\n          [VERSION]:   metadata?.annotations?.['catalog.cattle.io/upstream-version'],\n          [REPO]:      metadata?.annotations?.[CATALOG.SOURCE_REPO_NAME],\n          [REPO_TYPE]: metadata?.annotations?.[CATALOG.SOURCE_REPO_TYPE],\n          [CHART]:     metadata?.name\n        };\n\n        this.$router.push({\n          name:   'c-cluster-apps-charts-install',\n          params: { cluster: this.currentCluster?.id || '_' },\n          query,\n        });\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"checklist__container\">\n    <div class=\"checklist__prereq mb-20\">\n      <h2>{{ t('kubewarden.monitoring.prerequisites.label') }}</h2>\n      <p>{{ t('kubewarden.monitoring.prerequisites.description') }}</p>\n    </div>\n    <Banner\n      color=\"warning\"\n      :label=\"t('kubewarden.monitoring.prerequisites.warning')\"\n    />\n    <div class=\"mt-20 mb-20\">\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-open-tel\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(openTelSvc)\" />\n        <p v-clean-html=\"t('kubewarden.tracing.openTelemetry', {}, true)\" />\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-monitoring-app\">\n        <i\n          class=\"icon mr-10\"\n          :class=\"badgeIcon(monitoringApp)\"\n        />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.monitoring.prerequisites.monitoringApp.label', {}, true)\" p />\n          <button\n            v-if=\"!monitoringApp\"\n            v-clean-tooltip=\"monitoringLinkTooltip\"\n            data-testid=\"kw-monitoring-checklist-step-config-button\"\n            class=\"btn role-primary ml-10\"\n            :disabled=\"!monitoringChart\"\n            @click=\"monitoringAppRoute()\"\n          >\n            {{ monitoringChartLink }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-service-monitor-map\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(kubewardenServiceMonitor)\" />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.monitoring.prerequisites.serviceMonitor.label', {}, true)\" p />\n          <AsyncButton\n            v-if=\"!kubewardenServiceMonitor\"\n            v-clean-tooltip=\"serviceMonitorsTooltip\"\n            data-testid=\"kw-monitoring-checklist-step-service-monitor-button\"\n            mode=\"serviceMonitor\"\n            class=\"ml-10\"\n            :disabled=\"serviceMonitorButtonDisabled\"\n            @click=\"addServiceMonitor\"\n          />\n        </div>\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-config-map\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(hasKubewardenDashboards)\" />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.monitoring.prerequisites.configMap.label', {}, true)\" p />\n          <AsyncButton\n            v-if=\"!hasKubewardenDashboards\"\n            v-clean-tooltip=\"dashboardsTooltip\"\n            data-testid=\"kw-monitoring-checklist-step-config-map-button\"\n            mode=\"grafanaDashboard\"\n            class=\"ml-10\"\n            :disabled=\"dashboardButtonDisabled\"\n            @click=\"addDashboards\"\n          />\n        </div>\n      </div>\n      <Banner\n        v-if=\"showConflictingDashboardsBanner\"\n        color=\"error\"\n      >\n        <div class=\"conflicting-banner\">\n          <p>\n            {{ t('kubewarden.monitoring.prerequisites.configMap.conflictingDashboardsBanner', { count: conflictingGrafanaDashboards.length }, true) }}\n          </p>\n          <router-link\n            v-for=\"configMap of conflictingGrafanaDashboards\"\n            :key=\"configMap.metadata.name\"\n            :to=\"configMap.detailLocation\"\n            class=\"text-bold\"\n          >\n            {{ configMap.metadata.name }}\n          </router-link>\n        </div>\n      </Banner>\n\n      <!-- Telemetry banners -->\n      <div>\n        <Banner\n          v-if=\"outdatedTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.monitoring.prerequisites.outdated')\"\n        />\n        <Banner\n          v-if=\"unsupportedTelemetrySpec\"\n          color=\"error\"\n          :label=\"t('kubewarden.monitoring.prerequisites.unsupported')\"\n        />\n      </div>\n\n      <div class=\"checklist__step mb-20\" data-testid=\"kw-monitoring-checklist-step-controller-config\">\n        <i class=\"icon mr-10\" :class=\"badgeIcon(metricsConfiguration)\" />\n        <div class=\"checklist__config\">\n          <p v-clean-html=\"t('kubewarden.monitoring.prerequisites.controllerConfig.label', {}, true)\" p />\n          <button\n            v-if=\"!metricsConfiguration\"\n            v-clean-tooltip=\"controllerLinkTooltip\"\n            data-testid=\"kw-monitoring-checklist-step-config-button\"\n            class=\"btn role-primary ml-10\"\n            :disabled=\"controllerLinkDisabled\"\n            @click=\"controllerAppRoute()\"\n          >\n            {{ t(\"kubewarden.monitoring.prerequisites.controllerConfig.button\") }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.checklist {\n  &__container {\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    border: 1px solid var(--border);\n    padding: 10px;\n  }\n\n  &__step, &__config {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n  }\n\n  &__step {\n    min-height: 40px;\n  }\n}\n\n.conflicting-banner {\n  display: flex;\n  flex-direction: column;\n}\n</style>\n","import { render } from \"./MetricsChecklist.vue?vue&type=template&id=9013874c&scoped=true\"\nimport script from \"./MetricsChecklist.vue?vue&type=script&lang=js\"\nexport * from \"./MetricsChecklist.vue?vue&type=script&lang=js\"\n\nimport \"./MetricsChecklist.vue?vue&type=style&index=0&id=9013874c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9013874c\"]])\n\nexport default __exports__","import { render } from \"./MetricsTab.vue?vue&type=template&id=01451ab5\"\nimport script from \"./MetricsTab.vue?vue&type=script&lang=js\"\nexport * from \"./MetricsTab.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".policy-table-container[data-v-01307b5c]{display:flex;flex-direction:column;gap:1rem}.filter[data-v-01307b5c]{display:flex;flex-direction:row;justify-content:flex-end;align-self:flex-end;align-items:center}.filter[data-v-01307b5c]>*{margin:10px;max-width:33%}.filter[data-v-01307b5c]>:first-child{margin-left:0}.filter[data-v-01307b5c]>:last-child{margin-right:0}.filter__category[data-v-01307b5c]{min-width:200px;height:unset}.filter__reset[data-v-01307b5c],.filter__search[data-v-01307b5c]{height:61px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","export function proxyUrl(service: any, port: number): string {\n  const view: string = service?.links['view'];\n  const idx: number = view.lastIndexOf(`/`);\n\n  return proxyUrlFromBase(view.slice(0, idx), 'http', service?.metadata.name, port);\n}\n\nexport function proxyUrlFromBase(base: string, scheme: string, name: string, port: number, path?: any): string {\n  const schemaNamePort = (scheme ? `${ encodeURIComponent(scheme) }:` : '') + encodeURIComponent(name) + (port ? `:${ encodeURIComponent(port) }` : '');\n\n  const cleanPath = `/${ (path || '').replace(/^\\/+/g, '') }`;\n  const cleanBase = base.replace(/\\/+$/g, '');\n\n  const out = `${ cleanBase }/${ schemaNamePort }/proxy${ cleanPath }`;\n\n  return out;\n}\n","import isEmpty from 'lodash/isEmpty';\n\nimport {\n  KUBEWARDEN, JaegerConfig, PolicyTrace, PolicyTraceConfig, Tag\n} from '@kubewarden/types';\nimport { proxyUrl } from '@kubewarden/utils/service';\n\n/** TODO: Update the `any` types throughout this file */\n\n/**\n * Fetches trace reports from Jaeger for each related policy or singular policy.\n * @param config `JaegerConfig` | Contains the `store`, `jaegerQueryService`, `resource` (policy-server or policy type),\n * `relatedPolicies?` needed for policy server, `policy?` for individual policies, `time?` for trace timeframe.\n * @returns `PolicyTraceConfig | null` | A scaffold object which contains the policy name, cluster id, and traces for the policy.\n */\nexport async function jaegerTraces(config: JaegerConfig): Promise<PolicyTraceConfig | null> {\n  const {\n    store, queryService, resource, relatedPolicies, policy, time\n  } = config;\n\n  try {\n    const proxy = proxyUrl(queryService, 16686);\n\n    const promises = [];\n\n    if (!isEmpty(relatedPolicies)) {\n      relatedPolicies?.forEach((p: any) => {\n        const hash = jaegerTraceRequest(store, proxy, p, time);\n\n        if (hash) {\n          promises.push(hash);\n        }\n      });\n    } else if (policy) {\n      promises.push(jaegerTraceRequest(store, proxy, policy, time));\n    } else {\n      throw new Error('Policy is undefined');\n    }\n\n    let res = await Promise.all(promises);\n\n    res = res.flatMap((o) => o?.data);\n\n    return scaffoldPolicyTrace(store, res, resource, relatedPolicies, policy);\n  } catch (e) {\n    console.warn(`Error fetching Jaeger traces: ${ e }`);\n  }\n\n  return null;\n}\n\nexport function jaegerPolicyName(policy: any) {\n  let out = null;\n\n  switch (policy?.kind) {\n  case 'ClusterAdmissionPolicy':\n    out = `clusterwide-${ policy?.metadata?.name }`;\n    break;\n\n  case 'AdmissionPolicy':\n    out = `namespaced-${ policy?.metadata?.namespace }-${ policy?.metadata?.name }`;\n    break;\n\n  default:\n    break;\n  }\n\n  return out;\n}\n\nfunction jaegerTraceRequest(store: any, proxyUrl: any, policy: any, time?: any) {\n  let apiPath = null;\n\n  const name = jaegerPolicyName(policy);\n  const lookbackTime = time || '2d';\n\n  const options = `lookback=${ lookbackTime }&tags={\"policy_id\"%3A\"${ name }\"}`;\n\n  // The service `kubewarden-policy-server` is **not** a k8s Service\n  apiPath = `api/traces?service=kubewarden-policy-server&operation=validation&${ options }`;\n  const JAEGER_PATH = `${ proxyUrl + apiPath }`;\n\n  return store.dispatch('cluster/request', { url: JAEGER_PATH });\n}\n\nfunction scaffoldPolicyTrace(store: any, traces: any, resource: any, relatedPolicies: any, policy: any): any {\n  const currentCluster = store.getters['currentCluster'];\n  const out = [];\n\n  function filterTraces(p: any) {\n    const policyName = jaegerPolicyName(p);\n\n    return traces.reduce((acc: any, trace: any): PolicyTrace[] => {\n      let out = {};\n\n      const validationSpan = trace.spans.find((span: any) => span.operationName === 'validation');\n      const matchedTag = validationSpan?.tags?.find((tag: any) => tag?.key === 'policy_id' && tag?.value === policyName);\n\n      if (matchedTag) {\n        const convertedTags = convertTagsToObject(validationSpan.tags);\n\n        out = {\n          id:              trace.traceID,\n          allowed:         convertedTags.allowed,\n          mode:            p.spec.mode,\n          name:            convertedTags.name,\n          operation:       convertedTags.operation,\n          kind:            convertedTags.kind,\n          namespace:       convertedTags.namespace || null,\n          startTime:       validationSpan.startTime,\n          duration:        validationSpan.duration,\n          responseMessage: convertedTags.response_message,\n          responseCode:    convertedTags.response_code,\n          mutated:         convertedTags.mutated\n        };\n      }\n\n      if (!isEmpty(out)) {\n        acc.push(out);\n        store.dispatch('kubewarden/updatePolicyTraces', {\n          policyName:   p.metadata.name,\n          cluster:      currentCluster?.id,\n          updatedTrace: out\n        });\n      }\n\n      return acc;\n    }, []);\n  }\n\n  if (resource === KUBEWARDEN.POLICY_SERVER) {\n    for (const relatedPolicy of relatedPolicies) {\n      const relatedTraces = filterTraces(relatedPolicy);\n\n      if (!isEmpty(relatedTraces)) {\n        out.push({\n          policyName: relatedPolicy.metadata.name,\n          cluster:    currentCluster?.id,\n          traces:     relatedTraces\n        });\n      }\n    }\n  } else {\n    const relatedTraces = filterTraces(policy);\n\n    if (!isEmpty(relatedTraces)) {\n      out.push({\n        policyName: policy.metadata.name,\n        cluster:    currentCluster?.id,\n        traces:     relatedTraces\n      });\n    }\n  }\n\n  return out;\n}\n\nexport function convertTagsToObject(arr: Tag[]): Record<string, string | number | boolean> {\n  const result: Record<string, string | number | boolean> = {};\n\n  for (const item of arr) {\n    switch (item.type) {\n    case 'string':\n      result[item.key] = item.value as string;\n      break;\n    case 'int64':\n      result[item.key] = parseInt(item.value as string, 10);\n      break;\n    case 'float64':\n      result[item.key] = parseFloat(item.value as string);\n      break;\n    case 'bool':\n      result[item.key] = item.value === 'true';\n      break;\n    default:\n      result[item.key] = item.value;\n    }\n  }\n\n  return result;\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./TraceChecklist.vue?vue&type=style&index=0&id=7139a8b0&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"29f75efb\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./policies.kubewarden.io.policyserver.vue?vue&type=style&index=0&id=4044d828&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f6fddd2e\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".relative[data-v-4044d828]{position:relative}.policy__mode[data-v-4044d828]{display:flex;align-items:center}.policy__mode i[data-v-4044d828]{margin-left:5px;font-size:22px;color:var(--warning)}.gauges[data-v-4044d828],.gaugesContainer[data-v-4044d828]{display:flex}.gauges[data-v-4044d828]{justify-content:space-around;flex-wrap:wrap;justify-content:left}.gauges .count-gauge[data-v-4044d828]{width:46%;margin-bottom:10px;flex:initial}.gauges[data-v-4044d828]>*{flex:1;margin-right:1.75%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./TraceTable.vue?vue&type=style&index=0&id=01307b5c&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"50a9f64e\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","<script>\nimport { _CREATE } from '@shell/config/query-params';\n\nimport { KUBEWARDEN } from '@kubewarden/types';\n\nimport PolicyDetail from '@kubewarden/components/Policies/PolicyDetail';\n\nexport default {\n  name: 'ClusterAdmissionPolicy',\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  components: { PolicyDetail },\n\n  data() {\n    return { resource: KUBEWARDEN.ADMISSION_POLICY };\n  }\n};\n</script>\n\n<template>\n  <PolicyDetail :value=\"value\" :mode=\"mode\" :resource=\"resource\" />\n</template>\n","import { render } from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=template&id=ac95b14a\"\nimport script from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { mapGetters } from 'vuex';\nimport isEmpty from 'lodash/isEmpty';\n\nimport { _CREATE } from '@shell/config/query-params';\nimport { monitoringStatus } from '@shell/utils/monitoring';\nimport CreateEditView from '@shell/mixins/create-edit-view';\n\nimport Markdown from '@shell/components/Markdown';\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport Tab from '@shell/components/Tabbed/Tab';\n\nimport { ARTIFACTHUB_PKG_ANNOTATION } from '@kubewarden/types';\n\nimport MetricsTab from '@kubewarden/components/MetricsTab';\nimport RulesTable from '@kubewarden/components/RulesTable';\nimport TraceTable from '@kubewarden/components/TraceTable';\n\nexport default {\n  name: 'PolicyDetail',\n\n  components: {\n    Markdown,\n    MetricsTab,\n    ResourceTabs,\n    RulesTable,\n    Tab,\n    TraceTable\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    mode: {\n      type:    String,\n      default: _CREATE,\n    },\n\n    resource: {\n      type:    String,\n      default: null\n    },\n\n    value: {\n      type:    Object,\n      default: () => {},\n    },\n  },\n\n  async mounted() {\n    if (this.value?.metadata?.annotations?.[ARTIFACTHUB_PKG_ANNOTATION]) {\n      try {\n        const artifactHubPackage = await this.value.artifactHubPackageVersion();\n\n        if (artifactHubPackage && !artifactHubPackage.error && artifactHubPackage.readme) {\n          this.policyReadme = JSON.parse(JSON.stringify(artifactHubPackage.readme));\n        }\n      } catch (e) {\n        console.warn(`Unable to fetch artifacthub package: ${ e }`);\n      }\n    }\n  },\n\n  data() {\n    return { policyReadme: null };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    ...monitoringStatus(),\n\n    dashboardVars() {\n      return { policy_name: `clusterwide-${ this.value?.id }` };\n    },\n\n    hasRelationships() {\n      return !!this.value?.metadata?.relationships;\n    },\n\n    hasRules() {\n      return !isEmpty(this.rulesRows?.[0]);\n    },\n\n    rulesRows() {\n      return this.value?.spec?.rules;\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"mb-20\">\n      <h3>{{ t('namespace.resources') }}</h3>\n    </div>\n    <ResourceTabs :value=\"value\" data-testid=\"kw-policy-detail-tabs\" :mode=\"mode\" :need-related=\"hasRelationships\">\n      <Tab v-if=\"policyReadme\" name=\"policy-readme\" label=\"Readme\" :weight=\"99\">\n        <Markdown v-model:value=\"policyReadme\" data-testid=\"kw-policy-detail-readme\" />\n      </Tab>\n\n      <Tab v-if=\"hasRules\" name=\"policy-rules\" label=\"Rules\" :weight=\"98\">\n        <RulesTable :rows=\"rulesRows\" data-testid=\"kw-policy-detail-rules-table\" />\n      </Tab>\n\n      <Tab name=\"policy-tracing\" label=\"Tracing\" :weight=\"97\">\n        <TraceTable :resource=\"resource\" :policy=\"value\" data-testid=\"kw-policy-detail-trace-table\" />\n      </Tab>\n\n      <Tab #default=\"props\" name=\"policy-metrics\" label=\"Metrics\" :weight=\"96\">\n        <MetricsTab :resource=\"resource\" :policy-obj=\"value\" :active=\"props.active\" />\n      </Tab>\n    </ResourceTabs>\n  </div>\n</template>\n","<script>\nimport { Banner } from '@components/Banner';\nimport SortableTable from '@shell/components/SortableTable';\n\nimport { RULE_HEADERS } from '@kubewarden/config/table-headers';\n\nexport default {\n  props: {\n    rows: {\n      type:     Array,\n      default:  () => []\n    }\n  },\n\n  components: {\n    Banner,\n    SortableTable\n  },\n\n  data() {\n    return { RULE_HEADERS };\n  },\n\n  methods: {\n    joinColumn(resource) {\n      return resource?.join(', ') || '';\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <SortableTable\n      v-if=\"rows.length > 0\"\n      data-testid=\"kw-policy-rules-sortable-table\"\n      :rows=\"rows\"\n      :headers=\"RULE_HEADERS\"\n      :table-actions=\"false\"\n      :row-actions=\"false\"\n      key-field=\"traceID\"\n      default-sort-by=\"startTime\"\n    >\n      <template #col:apiGroup=\"{row}\">\n        <td>\n          <span>{{ row.apiGroups || '-' }}</span>\n        </td>\n      </template>\n\n      <template #col:apiVersion=\"{row}\">\n        <td>\n          <span>{{ row.apiVersions || '-' }}</span>\n        </td>\n      </template>\n\n      <template #col:operations=\"{row}\">\n        <td>\n          <span>{{ joinColumn(row.operations) }}</span>\n        </td>\n      </template>\n\n      <template #col:resources=\"{row}\">\n        <td>\n          <span>{{ joinColumn(row.resources) }}</span>\n        </td>\n      </template>\n    </SortableTable>\n    <div v-else>\n      <Banner\n        class=\"type-banner mb-20 mt-0\"\n        color=\"warning\"\n        :label=\"t('kubewarden.policies.noRules')\"\n      />\n    </div>\n  </div>\n</template>\n","import { render } from \"./RulesTable.vue?vue&type=template&id=5f362615\"\nimport script from \"./RulesTable.vue?vue&type=script&lang=js\"\nexport * from \"./RulesTable.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PolicyDetail.vue?vue&type=template&id=5a35877c\"\nimport script from \"./PolicyDetail.vue?vue&type=script&lang=js\"\nexport * from \"./PolicyDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".checklist__container[data-v-7139a8b0]{display:flex;justify-content:center;flex-direction:column;border:1px solid var(--border);padding:10px}.checklist__config[data-v-7139a8b0],.checklist__step[data-v-7139a8b0]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.checklist__step[data-v-7139a8b0]{min-height:40px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["key","class","_ctx","$fetchState","pending","_createBlock","_component_Loading","_createElementBlock","_hoisted_1","$data","policyGauges","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_toDisplayString","t","_hoisted_5","_Fragment","_renderList","group","_component_CountGauge","total","$options","relatedPoliciesTotal","useful","count","graphical","color","name","emptyTraces","_createCommentVNode","_hoisted_6","_hoisted_7","tracesGauges","traceGaugeTotals","_createVNode","_component_ResourceTabs","value","$props","mode","default","_withCtx","_component_Tab","label","weight","_component_ResourceTable","rows","relatedPolicies","headers","RELATED_HEADERS","groupable","groupPreference","row","_component_BadgeState","id","operation","_","_component_TraceTable","resource","props","_component_MetricsTab","active","components","BadgeState","CountGauge","Loading","MetricsTab","ResourceTabs","ResourceTable","Tab","TraceTable","mixins","CreateEditView","type","String","_CREATE","Object","required","fetch","hash","allHash","this","allRelatedPolicies","assignIfNotEmpty","prop","isEmpty","data","reloadRequired","KUBEWARDEN","POLICY_SERVER","computed","mapGetters","policyTraces","_group","mapPref","GROUP_RESOURCES","filteredTraces","filter","policyTraceObj","currentCluster","cluster","out","length","flatMap","traces","methods","hasNamespaceSelector","namespaceSelector","__exports__","render","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","keys","module","exports","_component_PolicyDetail","PolicyDetail","ADMISSION_POLICY","___CSS_LOADER_EXPORT___","push","refreshingCharts","showChecklist","_component_TraceChecklist","controllerApp","controllerChart","tracingConfiguration","jaegerQuerySvc","openTelSvc","outdatedTelemetrySpec","unsupportedTelemetrySpec","incompleteTelemetrySpec","emptyPolicies","_component_Banner","showTable","_component_SortableTable","filteredValidations","TRACE_HEADERS","paging","rowsPerPage","modeColor","namespace","formatTime","startTime","duration","fullColspan","colspan","responseMessage","_hoisted_8","responseCode","_hoisted_9","_hoisted_10","mutated","emptyTracesLabel","dayjs","_duration","ONE_MILLISECOND","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","UNIT_STEPS","unit","microseconds","ofPrevious","formatDuration","primaryUnit","secondaryUnit","_dropWhile","index","_round","primaryValue","Math","floor","primaryUnitString","secondaryValue","round","secondaryUnitString","p","_normalizeClass","badgeIcon","tracingEnabled","disabled","controllerLinkDisabled","onClick","_cache","args","controllerAppRoute","_createTextVNode","controllerLinkTooltip","Boolean","Banner","chart","enabled","metadata","spec","query","NAMESPACE","annotations","CATALOG","NAME","RELEASE_NAME","VERSION","REPO","SOURCE_REPO_NAME","REPO_TYPE","SOURCE_REPO_TYPE","CHART","$router","params","relativeTime","Array","policy","SortableTable","TraceChecklist","ResourceFetch","types","APP","CLUSTER_REPO","SERVICE","$store","getters","$fetchType","options","store","queryService","specificValidations","jaegerTraces","fetchValues","MODE_MAP","OPERATION_MAP","charts","allApps","allServices","find","app","KUBEWARDEN_CHARTS","CONTROLLER","chartName","groupField","isPolicyServer","version","telemetry","values","semver","tracingIsUndefinedOrBoolean","undefined","tracing","endpointIsDefined","sidecar","jaeger","endpoint","handleTracingChecklist","jaegerServices","svc","labels","ports","port","openTelemetryServices","KUBERNETES","MANAGED_NAME","v","opColor","op","time","val","content","__esModule","locals","add","_component_MetricsChecklist","cattleDashboardNs","conflictingGrafanaDashboards","kubewardenServiceMonitor","kubewardenGrafanaDashboards","metricsConfiguration","monitoringApp","monitoringChart","policyObj","policyServerObj","onUpdateServiceMonitors","updateServiceMonitors","metricsProxy","_component_DashboardMetrics","vars","policyName","async","grafanaProxy","config","grafana","grafanaService","base","proxy","path","handleGrowl","error","dispatch","root","findKubewardenDashboards","CONFIG_MAP","selector","addKubewardenDashboards","dashboardEnums","KubewardenDashboards","file","fileKey","existing","KubewardenDashboardLabels","DASHBOARD","PART_OF","GRAFANA_DASHBOARD","HelmAnnotations","configMapTemplate","JSON","stringify","save","findServiceMonitor","allServiceMonitors","smName","policyServer","sm","matchLabels","addKubewardenServiceMonitor","controllerNs","serviceMonitor","MONITORING","SERVICEMONITOR","serviceMonitorTemplate","kind","endpoints","interval","matchNames","serviceMonitorObj","$event","monitoringAppRoute","monitoringChartLink","monitoringLinkTooltip","_hoisted_11","_component_AsyncButton","serviceMonitorButtonDisabled","addServiceMonitor","serviceMonitorsTooltip","_hoisted_12","hasKubewardenDashboards","_hoisted_13","_hoisted_14","dashboardButtonDisabled","addDashboards","dashboardsTooltip","showConflictingDashboardsBanner","_hoisted_15","configMap","_component_router_link","to","detailLocation","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","kubewardenDashboards","AsyncButton","btnCb","$emit","isArray","emptyProp","goToInstall","DashboardMetrics","MetricsChecklist","debouncedRefreshCharts","debounce","init","refreshCharts","resourceMap","property","allRepos","allConfigMaps","allPolicyServers","allNamespaces","monitoringStatus","installed","METRICS_TYPE","metricsService","dashboardExists","_statusText","message","POLICY","watch","jaegerPolicyName","ns","monitoringServices","console","log","metricsIsUndefinedOrBoolean","metrics","handleMetricsChecklist","policyServerSvcs","policyServerNames","ps","grafanaDashboardsInstalled","proxyUrl","service","view","links","idx","lastIndexOf","proxyUrlFromBase","slice","scheme","schemaNamePort","encodeURIComponent","cleanPath","replace","cleanBase","promises","jaegerTraceRequest","forEach","res","all","scaffoldPolicyTrace","warn","apiPath","lookbackTime","JAEGER_PATH","url","filterTraces","reduce","acc","trace","validationSpan","spans","span","operationName","matchedTag","tags","tag","convertedTags","convertTagsToObject","traceID","allowed","response_message","response_code","updatedTrace","relatedPolicy","relatedTraces","arr","result","item","parseInt","parseFloat","hasRelationships","policyReadme","_component_Markdown","hasRules","_component_RulesTable","rulesRows","RULE_HEADERS","apiGroups","apiVersions","joinColumn","operations","resources","join","Markdown","RulesTable","mounted","ARTIFACTHUB_PKG_ANNOTATION","artifactHubPackage","artifactHubPackageVersion","readme","parse","dashboardVars","policy_name","relationships","rules"],"sourceRoot":""}