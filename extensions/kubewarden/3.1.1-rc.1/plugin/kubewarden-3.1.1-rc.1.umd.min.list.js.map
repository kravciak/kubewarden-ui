{"version":3,"file":"kubewarden-3.1.1-rc.1.umd.min.list.js","mappings":"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","sources":["webpack://kubewarden-3.1.1-rc.1/./list/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-3.1.1-rc.1/./list/policies.kubewarden.io.admissionpolicy.vue?4059","webpack://kubewarden-3.1.1-rc.1/./list/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-3.1.1-rc.1/./list/policies.kubewarden.io.policyserver.vue?5305","webpack://kubewarden-3.1.1-rc.1/./components/Policies/PolicyList.vue","webpack://kubewarden-3.1.1-rc.1/./components/Policies/PolicyList.vue?c0ac","webpack://kubewarden-3.1.1-rc.1/./components/Policies/PolicyList.vue?4963","webpack://kubewarden-3.1.1-rc.1/./components/Policies/PolicyList.vue?cf94","webpack://kubewarden-3.1.1-rc.1/./list/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-3.1.1-rc.1/./modules/policies.ts","webpack://kubewarden-3.1.1-rc.1/./list/policies.kubewarden.io.clusteradmissionpolicy.vue?020c"],"sourcesContent":["<script>\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\n\nimport PolicyList from '@kubewarden/components/Policies/PolicyList';\n\nexport default {\n  components: {\n    Banner,\n    Loading,\n    PolicyList\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n  },\n\n  computed: {\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      data-testid=\"kw-ap-list-banner\"\n      class=\"type-banner mb-20 mt-0\"\n      color=\"info\"\n      :label=\"t('kubewarden.admissionPolicy.description')\"\n    />\n\n    <PolicyList data-testid=\"kw-ap-policy-list\" :resource=\"resource\" :rows=\"rows\" :schema=\"schema\" />\n  </div>\n</template>\n","import { render } from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=template&id=35ad0021\"\nimport script from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { CATALOG } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\n\nimport Loading from '@shell/components/Loading';\nimport ResourceTable from '@shell/components/ResourceTable';\n\nimport { KUBEWARDEN_APPS } from '@kubewarden/types';\n\nimport DefaultsBanner from '@kubewarden/components/DefaultsBanner';\n\nexport default {\n  components: {\n    DefaultsBanner,\n    Loading,\n    ResourceTable\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n\n    if (this.$store.getters['cluster/canList'](CATALOG.APP)) {\n      await this.$store.dispatch('catalog/load');\n\n      if (!this.hideBannerDefaults) {\n        this.apps = await this.$store.dispatch('cluster/findAll', { type: CATALOG.APP });\n      }\n    }\n  },\n\n  data() {\n    return { apps: null };\n  },\n\n  computed: {\n    defaultsApp() {\n      return this.apps?.find((a) => {\n        return a.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME] === KUBEWARDEN_APPS.RANCHER_DEFAULTS;\n      });\n    },\n\n    hideBannerDefaults() {\n      return this.$store.getters['kubewarden/hideBannerDefaults'] || !!this.defaultsApp;\n    },\n\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <DefaultsBanner v-if=\"!hideBannerDefaults\" />\n    <ResourceTable\n      :schema=\"schema\"\n      :rows=\"rows\"\n      data-testid=\"kw-ps-resource-table\"\n    />\n  </div>\n</template>\n","import { render } from \"./policies.kubewarden.io.policyserver.vue?vue&type=template&id=44978070\"\nimport script from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport flattenDeep from 'lodash/flattenDeep';\nimport { sortBy } from '@shell/utils/sort';\n\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ResourceTable from '@shell/components/ResourceTable';\n\nexport default {\n  components: {\n    LabeledSelect,\n    ResourceTable\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true\n    },\n    rows: {\n      type:     Array,\n      required: true\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      mode:             null,\n      resources:        null\n    };\n  },\n\n  created() {\n    this.mode = 'All';\n  },\n\n  computed: {\n    headers() {\n      return this.$store.getters['type-map/headersFor'](this.schema);\n    },\n\n    filteredRows() {\n      const rows = (this.rows || []);\n\n      const out = rows.filter((row) => {\n        const flatRules = flattenDeep(row.spec.rules);\n        const flatResources = flatRules.flatMap((r) => r.resources);\n        const rowMode = row.spec.mode;\n\n        if (this.mode && this.mode !== 'All' && this.mode !== rowMode) {\n          return false;\n        }\n\n        if (this.resources) {\n          for (const selected of this.resources) {\n            if (!flatResources.includes(selected)) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      });\n\n      return sortBy(out, ['id']);\n    },\n\n    modeOptions() {\n      const out = this.rows?.map((row) => row.spec?.mode) || [];\n\n      out.unshift('All');\n\n      return [...new Set(out)];\n    },\n\n    resourceOptions() {\n      return this.flattenRule('resources');\n    }\n  },\n\n  methods: {\n    flattenRule(option) {\n      const flattened = this.rows?.flatMap((row) => {\n        const flatRules = flattenDeep(row.spec?.rules);\n\n        return flatRules.flatMap((r) => r[option]);\n      });\n\n      return [...new Set(flattened)] || [];\n    },\n\n    hasNamespaceSelector(row) {\n      return row.namespaceSelector;\n    },\n\n    resetFilter() {\n      this.resources = null;\n      this.mode = 'All';\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"filter\">\n      <LabeledSelect\n        v-model:value=\"resources\"\n        :clearable=\"true\"\n        :taggable=\"true\"\n        :multiple=\"true\"\n        class=\"filter__resources\"\n        label=\"Search by Resource\"\n        :options=\"resourceOptions\"\n      />\n      <LabeledSelect\n        v-model:value=\"mode\"\n        :clearable=\"true\"\n        :searchable=\"false\"\n        :options=\"modeOptions\"\n        :multiple=\"false\"\n        placement=\"bottom\"\n        class=\"filter__mode\"\n        label=\"Search by Mode\"\n      />\n      <button\n        ref=\"btn\"\n        class=\"btn, btn-sm, role-primary\"\n        type=\"button\"\n        @click=\"resetFilter\"\n      >\n        {{ t('kubewarden.utils.resetFilter') }}\n      </button>\n    </div>\n\n    <ResourceTable :schema=\"schema\" :rows=\"filteredRows\" :headers=\"headers\" />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.filter {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-self: flex-end;\n\n  & > * {\n    margin: 10px;\n  }\n  & > *:first-child {\n    margin-left: 0;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n}\n\n@media only screen and (min-width: map-get($breakpoints, '--viewport-4')) {\n  .filter {\n    width: 100%;\n  }\n}\n@media only screen and (min-width: map-get($breakpoints, '--viewport-12')) {\n  .filter {\n    width: 75%;\n  }\n}\n\n.policy {\n  &__mode {\n    display: flex;\n    align-items: center;\n\n    i {\n      margin-left: 5px;\n      font-size: 22px;\n      color: var(--warning);\n    }\n  }\n}\n</style>\n","import { render } from \"./PolicyList.vue?vue&type=template&id=e80fa762&scoped=true\"\nimport script from \"./PolicyList.vue?vue&type=script&lang=js\"\nexport * from \"./PolicyList.vue?vue&type=script&lang=js\"\n\nimport \"./PolicyList.vue?vue&type=style&index=0&id=e80fa762&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e80fa762\"]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./PolicyList.vue?vue&type=style&index=0&id=e80fa762&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4852adcd\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".filter[data-v-e80fa762]{display:flex;flex-direction:row;justify-content:flex-end;align-self:flex-end}.filter[data-v-e80fa762]>*{margin:10px}.filter[data-v-e80fa762]>:first-child{margin-left:0}.filter[data-v-e80fa762]>:last-child{margin-right:0}@media only screen and (min-width:480px){.filter[data-v-e80fa762]{width:100%}}@media only screen and (min-width:1281px){.filter[data-v-e80fa762]{width:75%}}.policy__mode[data-v-e80fa762]{display:flex;align-items:center}.policy__mode i[data-v-e80fa762]{margin-left:5px;font-size:22px;color:var(--warning)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<script>\nimport { CATALOG, UI_PLUGIN } from '@shell/config/types';\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { KUBEWARDEN_APPS, KUBEWARDEN_CHARTS, KUBEWARDEN_PRODUCT_NAME } from '@kubewarden/types';\nimport { kwDefaultsHelmChartSettings } from '@kubewarden/modules/policies';\n\nimport PolicyList from '@kubewarden/components/Policies/PolicyList';\nimport DefaultsBanner from '@kubewarden/components/DefaultsBanner';\n\nexport default {\n  components: {\n    Banner,\n    Loading,\n    PolicyList,\n    DefaultsBanner\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    // needed to populate banner for edit settings compatibility for kubewarden-default CAP's\n    if (this.$store.getters['cluster/canList'](CATALOG.APP)) {\n      this.$store.dispatch('cluster/findAll', { type: CATALOG.APP });\n    }\n    if (this.$store.getters['cluster/canList'](UI_PLUGIN)) {\n      this.$store.dispatch('cluster/findAll', { type: UI_PLUGIN });\n    }\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n  },\n\n  computed: {\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    },\n    allApps() {\n      return this.$store.getters['cluster/all'](CATALOG.APP);\n    },\n    kubewardenDefaultsApp() {\n      if (this.allApps) {\n        return this.allApps?.find((a) => {\n          return (\n            a.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME] === KUBEWARDEN_APPS.RANCHER_DEFAULTS ||\n            a.spec?.chart?.metadata?.name === KUBEWARDEN_CHARTS.DEFAULTS\n          );\n        });\n      }\n\n      return null;\n    },\n    kubewardenExtension() {\n      const extensionsInstalled = this.$store.getters['uiplugins/plugins'] || [];\n\n      return extensionsInstalled?.find((ext) => ext?.id?.includes(KUBEWARDEN_PRODUCT_NAME));\n    },\n    kwDefaultsHelmChartSettingsCompatible() {\n      const kwDefaultsVersion = this.kubewardenDefaultsApp?.spec?.chart?.metadata?.version;\n      const uiPluginVersion = this.kubewardenExtension?.version;\n\n      if (kwDefaultsVersion && uiPluginVersion) {\n        return kwDefaultsHelmChartSettings(kwDefaultsVersion, uiPluginVersion);\n      }\n\n      return true;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      data-testid=\"kw-cap-list-banner\"\n      class=\"type-banner mb-20 mt-0\"\n      color=\"info\"\n      :label=\"t('kubewarden.clusterAdmissionPolicy.description')\"\n    />\n    <DefaultsBanner\n      v-if=\"!kwDefaultsHelmChartSettingsCompatible\"\n      mode=\"upgrade\"\n    />\n\n    <PolicyList data-testid=\"kw-cap-policy-list\" :resource=\"resource\" :rows=\"rows\" :schema=\"schema\" />\n  </div>\n</template>\n","import semver from 'semver';\n\n/**\n * Determines if the Kubewarden Extension is compatible with kubewarden-defaults version for displaying settings edit\n * for Kubewarden Extension `>= 1.4.2` it requires kubewarden-defaults version of `>= 2.0.0`\n * @param string\n * @param string\n * @returns Object\n */\nexport function kwDefaultsHelmChartSettings(kwDefaultsVersion: string, uiPluginVersion: string): boolean | void {\n  if (semver.gt(uiPluginVersion, '1.4.1')) {\n    return semver.gt(kwDefaultsVersion, '1.9.9');\n  }\n\n  return true;\n}\n","import { render } from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=template&id=6672838c\"\nimport script from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js\"\nexport * from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","_ctx","$fetchState","pending","_createBlock","_component_Loading","_createElementBlock","_hoisted_1","_createVNode","_component_Banner","class","color","label","t","_component_PolicyList","resource","$props","rows","$options","schema","components","Banner","Loading","PolicyList","props","type","String","required","Object","fetch","this","$store","dispatch","computed","getters","__exports__","render","hideBannerDefaults","_createCommentVNode","_component_DefaultsBanner","_component_ResourceTable","DefaultsBanner","ResourceTable","CATALOG","APP","apps","data","defaultsApp","find","a","spec","chart","metadata","annotations","CATALOG_ANNOTATIONS","RELEASE_NAME","KUBEWARDEN_APPS","RANCHER_DEFAULTS","_createElementVNode","_component_LabeledSelect","value","$data","resources","_cache","$event","clearable","taggable","multiple","options","resourceOptions","mode","searchable","modeOptions","placement","ref","onClick","args","resetFilter","filteredRows","headers","LabeledSelect","Array","created","out","filter","row","flatRules","flattenDeep","rules","flatResources","flatMap","r","rowMode","selected","includes","sortBy","map","unshift","Set","flattenRule","methods","option","flattened","hasNamespaceSelector","namespaceSelector","content","__esModule","default","module","id","locals","exports","add","___CSS_LOADER_EXPORT___","push","kwDefaultsHelmChartSettingsCompatible","kwDefaultsHelmChartSettings","kwDefaultsVersion","uiPluginVersion","semver","UI_PLUGIN","allApps","kubewardenDefaultsApp","name","KUBEWARDEN_CHARTS","DEFAULTS","kubewardenExtension","extensionsInstalled","ext","KUBEWARDEN_PRODUCT_NAME","version"],"sourceRoot":""}