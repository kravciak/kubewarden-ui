{"version":3,"sources":["webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-2.1.0-rc.1/list/policies.kubewarden.io.admissionpolicy.vue","webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.admissionpolicy.vue?06c3","webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.admissionpolicy.vue?a051","webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-2.1.0-rc.1/list/policies.kubewarden.io.policyserver.vue","webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.policyserver.vue?c461","webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.policyserver.vue?966f","webpack://kubewarden-2.1.0-rc.1/./components/Policies/PolicyList.vue?d1bf","webpack://kubewarden-2.1.0-rc.1/./components/Policies/PolicyList.vue","webpack://kubewarden-2.1.0-rc.1/components/Policies/PolicyList.vue","webpack://kubewarden-2.1.0-rc.1/./components/Policies/PolicyList.vue?b428","webpack://kubewarden-2.1.0-rc.1/./components/Policies/PolicyList.vue?ab72","webpack://kubewarden-2.1.0-rc.1/./components/Policies/PolicyList.vue?83fc","webpack://kubewarden-2.1.0-rc.1/./components/Policies/PolicyList.vue?fb4b","webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-2.1.0-rc.1/./modules/policies.ts","webpack://kubewarden-2.1.0-rc.1/list/policies.kubewarden.io.clusteradmissionpolicy.vue","webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.clusteradmissionpolicy.vue?7c32","webpack://kubewarden-2.1.0-rc.1/./list/policies.kubewarden.io.clusteradmissionpolicy.vue?643a"],"names":["render","_vm","this","_c","_self","$fetchState","pending","staticClass","attrs","t","resource","rows","schema","staticRenderFns","components","Banner","Loading","PolicyList","props","type","String","required","Object","$store","dispatch","computed","getters","component","hideBannerDefaults","_e","DefaultsBanner","ResourceTable","CATALOG","APP","apps","data","defaultsApp","_this$apps","find","a","_a$spec","spec","chart","metadata","annotations","CATALOG_ANNOTATIONS","RELEASE_NAME","KUBEWARDEN_APPS","RANCHER_DEFAULTS","content","__esModule","default","module","i","locals","exports","add","resourceOptions","model","value","resources","callback","$$v","expression","modeOptions","mode","ref","on","resetFilter","_v","_s","filteredRows","headers","LabeledSelect","Array","created","out","filter","row","flatRules","flattenDeep","rules","flatResources","flatMap","r","rowMode","selected","includes","sortBy","_this$rows","map","_row$spec","unshift","Set","flattenRule","methods","option","_this$rows2","flattened","_row$spec2","hasNamespaceSelector","namespaceSelector","$set","___CSS_LOADER_API_IMPORT___","push","kwDefaultsHelmChartSettingsCompatible","kwDefaultsHelmChartSettings","kwDefaultsVersion","uiPluginVersion","semver","gt","UI_PLUGIN","allApps","kubewardenDefaultsApp","_this$allApps","_a$spec2","name","KUBEWARDEN_CHARTS","DEFAULTS","kubewardenExtension","extensionsInstalled","ext","_ext$id","id","KUBEWARDEN_PRODUCT_NAME","_this$kubewardenDefau","_this$kubewardenExten","version"],"mappings":"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","file":"kubewarden-2.1.0-rc.1.umd.min.list.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[_c('Banner',{staticClass:\"type-banner mb-20 mt-0\",attrs:{\"data-testid\":\"kw-ap-list-banner\",\"color\":\"info\",\"label\":_vm.t('kubewarden.admissionPolicy.description')}}),_c('PolicyList',{attrs:{\"data-testid\":\"kw-ap-policy-list\",\"resource\":_vm.resource,\"rows\":_vm.rows,\"schema\":_vm.schema}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\n\nimport PolicyList from '../components/Policies/PolicyList';\n\nexport default {\n  components: {\n    Banner, Loading, PolicyList\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n  },\n\n  computed: {\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      data-testid=\"kw-ap-list-banner\"\n      class=\"type-banner mb-20 mt-0\"\n      color=\"info\"\n      :label=\"t('kubewarden.admissionPolicy.description')\"\n    />\n\n    <PolicyList data-testid=\"kw-ap-policy-list\" :resource=\"resource\" :rows=\"rows\" :schema=\"schema\" />\n  </div>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=template&id=08772963&\"\nimport script from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.admissionpolicy.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[(!_vm.hideBannerDefaults)?_c('DefaultsBanner'):_vm._e(),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"rows\":_vm.rows,\"data-testid\":\"kw-ps-resource-table\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { CATALOG } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\n\nimport Loading from '@shell/components/Loading';\nimport ResourceTable from '@shell/components/ResourceTable';\n\nimport { KUBEWARDEN_APPS } from '../types';\n\nimport DefaultsBanner from '../components/DefaultsBanner';\n\nexport default {\n  components: {\n    DefaultsBanner, Loading, ResourceTable\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n\n    if ( this.$store.getters['cluster/canList'](CATALOG.APP) ) {\n      await this.$store.dispatch('catalog/load');\n\n      if ( !this.hideBannerDefaults ) {\n        this.apps = await this.$store.dispatch('cluster/findAll', { type: CATALOG.APP });\n      }\n    }\n  },\n\n  data() {\n    return { apps: null };\n  },\n\n  computed: {\n    defaultsApp() {\n      return this.apps?.find((a) => {\n        return a.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME] === KUBEWARDEN_APPS.RANCHER_DEFAULTS;\n      });\n    },\n\n    hideBannerDefaults() {\n      return this.$store.getters['kubewarden/hideBannerDefaults'] || !!this.defaultsApp;\n    },\n\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <DefaultsBanner v-if=\"!hideBannerDefaults\" />\n    <ResourceTable\n      :schema=\"schema\"\n      :rows=\"rows\"\n      data-testid=\"kw-ps-resource-table\"\n    />\n  </div>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.policyserver.vue?vue&type=template&id=2f23db10&\"\nimport script from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.policyserver.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyList.vue?vue&type=style&index=0&id=a2185e04&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"688bb416\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"filter\"},[_c('LabeledSelect',{staticClass:\"filter__resources\",attrs:{\"clearable\":true,\"taggable\":true,\"multiple\":true,\"label\":\"Search by Resource\",\"options\":_vm.resourceOptions},model:{value:(_vm.resources),callback:function ($$v) {_vm.resources=$$v},expression:\"resources\"}}),_c('LabeledSelect',{staticClass:\"filter__mode\",attrs:{\"clearable\":true,\"searchable\":false,\"options\":_vm.modeOptions,\"multiple\":false,\"placement\":\"bottom\",\"label\":\"Search by Mode\"},model:{value:(_vm.mode),callback:function ($$v) {_vm.mode=$$v},expression:\"mode\"}}),_c('button',{ref:\"btn\",staticClass:\"btn, btn-sm, role-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.resetFilter}},[_vm._v(\" \"+_vm._s(_vm.t('kubewarden.utils.resetFilter'))+\" \")])],1),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"rows\":_vm.filteredRows,\"headers\":_vm.headers}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport flattenDeep from 'lodash/flattenDeep';\nimport { sortBy } from '@shell/utils/sort';\n\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ResourceTable from '@shell/components/ResourceTable';\n\nexport default {\n  components: { LabeledSelect, ResourceTable },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true\n    },\n    rows: {\n      type:     Array,\n      required: true\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      mode:             null,\n      resources:        null\n    };\n  },\n\n  created() {\n    this.mode = 'All';\n  },\n\n  computed: {\n    headers() {\n      return this.$store.getters['type-map/headersFor'](this.schema);\n    },\n\n    filteredRows() {\n      const rows = ( this.rows || [] );\n\n      const out = rows.filter((row) => {\n        const flatRules = flattenDeep(row.spec.rules);\n        const flatResources = flatRules.flatMap(r => r.resources);\n        const rowMode = row.spec.mode;\n\n        if ( this.mode && this.mode !== 'All' && this.mode !== rowMode ) {\n          return false;\n        }\n\n        if ( this.resources ) {\n          for ( const selected of this.resources ) {\n            if ( !flatResources.includes(selected) ) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      });\n\n      return sortBy(out, ['id']);\n    },\n\n    modeOptions() {\n      const out = this.rows?.map(row => row.spec?.mode) || [];\n\n      out.unshift('All');\n\n      return [...new Set(out)];\n    },\n\n    resourceOptions() {\n      return this.flattenRule('resources');\n    }\n  },\n\n  methods: {\n    flattenRule(option) {\n      const flattened = this.rows?.flatMap((row) => {\n        const flatRules = flattenDeep(row.spec?.rules);\n\n        return flatRules.flatMap(r => r[option]);\n      });\n\n      return [...new Set(flattened)] || [];\n    },\n\n    hasNamespaceSelector(row) {\n      return row.namespaceSelector;\n    },\n\n    resetFilter() {\n      this.$set(this, 'resources', null);\n      this.$set(this, 'mode', 'All');\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"filter\">\n      <LabeledSelect\n        v-model=\"resources\"\n        :clearable=\"true\"\n        :taggable=\"true\"\n        :multiple=\"true\"\n        class=\"filter__resources\"\n        label=\"Search by Resource\"\n        :options=\"resourceOptions\"\n      />\n      <LabeledSelect\n        v-model=\"mode\"\n        :clearable=\"true\"\n        :searchable=\"false\"\n        :options=\"modeOptions\"\n        :multiple=\"false\"\n        placement=\"bottom\"\n        class=\"filter__mode\"\n        label=\"Search by Mode\"\n      />\n      <button\n        ref=\"btn\"\n        class=\"btn, btn-sm, role-primary\"\n        type=\"button\"\n        @click=\"resetFilter\"\n      >\n        {{ t('kubewarden.utils.resetFilter') }}\n      </button>\n    </div>\n\n    <ResourceTable :schema=\"schema\" :rows=\"filteredRows\" :headers=\"headers\" />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.filter {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  align-self: flex-end;\n\n  & > * {\n    margin: 10px;\n  }\n  & > *:first-child {\n    margin-left: 0;\n  }\n  & > *:last-child {\n    margin-right: 0;\n  }\n}\n\n@media only screen and (min-width: map-get($breakpoints, '--viewport-4')) {\n  .filter {\n    width: 100%;\n  }\n}\n@media only screen and (min-width: map-get($breakpoints, '--viewport-12')) {\n  .filter {\n    width: 75%;\n  }\n}\n\n.policy {\n  &__mode {\n    display: flex;\n    align-items: center;\n\n    i {\n      margin-left: 5px;\n      font-size: 22px;\n      color: var(--warning);\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyList.vue?vue&type=template&id=a2185e04&scoped=true&\"\nimport script from \"./PolicyList.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolicyList.vue?vue&type=style&index=0&id=a2185e04&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a2185e04\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyList.vue?vue&type=style&index=0&id=a2185e04&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".filter[data-v-a2185e04]{display:flex;flex-direction:row;justify-content:flex-end;align-self:flex-end}.filter>*[data-v-a2185e04]{margin:10px}.filter[data-v-a2185e04]>:first-child{margin-left:0}.filter[data-v-a2185e04]>:last-child{margin-right:0}@media only screen and (min-width:480px){.filter[data-v-a2185e04]{width:100%}}@media only screen and (min-width:1281px){.filter[data-v-a2185e04]{width:75%}}.policy__mode[data-v-a2185e04]{display:flex;align-items:center}.policy__mode i[data-v-a2185e04]{margin-left:5px;font-size:22px;color:var(--warning)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.$fetchState.pending)?_c('Loading'):_c('div',[_c('Banner',{staticClass:\"type-banner mb-20 mt-0\",attrs:{\"data-testid\":\"kw-cap-list-banner\",\"color\":\"info\",\"label\":_vm.t('kubewarden.clusterAdmissionPolicy.description')}}),(!_vm.kwDefaultsHelmChartSettingsCompatible)?_c('DefaultsBanner',{attrs:{\"mode\":\"upgrade\"}}):_vm._e(),_c('PolicyList',{attrs:{\"data-testid\":\"kw-cap-policy-list\",\"resource\":_vm.resource,\"rows\":_vm.rows,\"schema\":_vm.schema}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import semver from 'semver';\n\n/**\n * Determines if the Kubewarden Extension is compatible with kubewarden-defaults version for displaying settings edit\n * for Kubewarden Extension `>= 1.4.2` it requires kubewarden-defaults version of `>= 2.0.0`\n * @param string\n * @param string\n * @returns Object\n */\nexport function kwDefaultsHelmChartSettings(kwDefaultsVersion: string, uiPluginVersion: string): Object | void {\n  if (semver.gt(uiPluginVersion, '1.4.1')) {\n    return semver.gt(kwDefaultsVersion, '1.9.9');\n  }\n\n  return true;\n}","<script>\nimport { CATALOG, UI_PLUGIN } from '@shell/config/types';\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { KUBEWARDEN_APPS, KUBEWARDEN_CHARTS, KUBEWARDEN_PRODUCT_NAME } from '../types';\nimport { kwDefaultsHelmChartSettings } from '../modules/policies';\n\nimport PolicyList from '../components/Policies/PolicyList';\nimport DefaultsBanner from '../components/DefaultsBanner';\n\nexport default {\n  components: {\n    Banner, Loading, PolicyList, DefaultsBanner\n  },\n\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n    schema: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    // needed to populate banner for edit settings compatibility for kubewarden-default CAP's\n    if ( this.$store.getters['cluster/canList'](CATALOG.APP) ) {\n      this.$store.dispatch('cluster/findAll', { type: CATALOG.APP });\n    }\n    if ( this.$store.getters['cluster/canList'](UI_PLUGIN) ) {\n      this.$store.dispatch('cluster/findAll', { type: UI_PLUGIN });\n    }\n    await this.$store.dispatch('cluster/findAll', { type: this.resource });\n  },\n\n  computed: {\n    rows() {\n      return this.$store.getters['cluster/all'](this.resource);\n    },\n    allApps() {\n      return this.$store.getters['cluster/all'](CATALOG.APP);\n    },\n    kubewardenDefaultsApp() {\n      if ( this.allApps ) {\n        return this.allApps?.find((a) => {\n          return (\n            a.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME] === KUBEWARDEN_APPS.RANCHER_DEFAULTS ||\n            a.spec?.chart?.metadata?.name === KUBEWARDEN_CHARTS.DEFAULTS\n          );\n        });\n      }\n\n      return null;\n    },\n    kubewardenExtension() {\n      const extensionsInstalled = this.$store.getters['uiplugins/plugins'] || [];\n\n      return extensionsInstalled?.find(ext => ext?.id?.includes(KUBEWARDEN_PRODUCT_NAME));\n    },\n    kwDefaultsHelmChartSettingsCompatible() {\n      const kwDefaultsVersion = this.kubewardenDefaultsApp?.spec?.chart?.metadata?.version;\n      const uiPluginVersion = this.kubewardenExtension?.version;\n\n      if ( kwDefaultsVersion && uiPluginVersion) {\n        return kwDefaultsHelmChartSettings(kwDefaultsVersion, uiPluginVersion);\n      }\n\n      return true;\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Banner\n      data-testid=\"kw-cap-list-banner\"\n      class=\"type-banner mb-20 mt-0\"\n      color=\"info\"\n      :label=\"t('kubewarden.clusterAdmissionPolicy.description')\"\n    />\n    <DefaultsBanner\n      v-if=\"!kwDefaultsHelmChartSettingsCompatible\"\n      mode=\"upgrade\"\n    />\n\n    <PolicyList data-testid=\"kw-cap-policy-list\" :resource=\"resource\" :rows=\"rows\" :schema=\"schema\" />\n  </div>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=template&id=5f1987aa&\"\nimport script from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"\nexport * from \"./policies.kubewarden.io.clusteradmissionpolicy.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}